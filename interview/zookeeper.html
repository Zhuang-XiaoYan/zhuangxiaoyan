<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Zookeeper面试问题 | 庄小焱</title>
    <meta name="generator" content="VuePress 1.7.1">
    
    <meta name="description" content="我是庄小焱，PMP项目管理专家、系统架构设计师(高级)、CSDN博文专家、后端开发工程师。 博主在微服务、虚拟化、系统架构、大数据、机器学习领域不断学习，同时在博客中分享自己学习知识和相关技术， 欢迎大家和我交流学习，欢迎大家关注我的博客。">
    
    <link rel="preload" href="/zhuangxiaoyan/assets/css/0.styles.43ec611f.css" as="style"><link rel="preload" href="/zhuangxiaoyan/assets/js/app.868ae4fe.js" as="script"><link rel="preload" href="/zhuangxiaoyan/assets/js/2.e0e92cc0.js" as="script"><link rel="preload" href="/zhuangxiaoyan/assets/js/12.14f9a7e9.js" as="script"><link rel="prefetch" href="/zhuangxiaoyan/assets/js/10.f03f824c.js"><link rel="prefetch" href="/zhuangxiaoyan/assets/js/11.8bbceb5f.js"><link rel="prefetch" href="/zhuangxiaoyan/assets/js/13.875c4422.js"><link rel="prefetch" href="/zhuangxiaoyan/assets/js/14.b913d772.js"><link rel="prefetch" href="/zhuangxiaoyan/assets/js/15.04d0022c.js"><link rel="prefetch" href="/zhuangxiaoyan/assets/js/16.2f5474ed.js"><link rel="prefetch" href="/zhuangxiaoyan/assets/js/17.314561f8.js"><link rel="prefetch" href="/zhuangxiaoyan/assets/js/18.4f00aff9.js"><link rel="prefetch" href="/zhuangxiaoyan/assets/js/19.3198a9c6.js"><link rel="prefetch" href="/zhuangxiaoyan/assets/js/20.6ca58bc3.js"><link rel="prefetch" href="/zhuangxiaoyan/assets/js/21.2b13b489.js"><link rel="prefetch" href="/zhuangxiaoyan/assets/js/22.1ab1c76c.js"><link rel="prefetch" href="/zhuangxiaoyan/assets/js/23.71e25b05.js"><link rel="prefetch" href="/zhuangxiaoyan/assets/js/24.ad6ea50e.js"><link rel="prefetch" href="/zhuangxiaoyan/assets/js/25.76e0a373.js"><link rel="prefetch" href="/zhuangxiaoyan/assets/js/26.b9862941.js"><link rel="prefetch" href="/zhuangxiaoyan/assets/js/27.aa410472.js"><link rel="prefetch" href="/zhuangxiaoyan/assets/js/28.03808d20.js"><link rel="prefetch" href="/zhuangxiaoyan/assets/js/29.00bd7baa.js"><link rel="prefetch" href="/zhuangxiaoyan/assets/js/3.08485426.js"><link rel="prefetch" href="/zhuangxiaoyan/assets/js/30.005c22a8.js"><link rel="prefetch" href="/zhuangxiaoyan/assets/js/31.93f0d38f.js"><link rel="prefetch" href="/zhuangxiaoyan/assets/js/32.340f8c91.js"><link rel="prefetch" href="/zhuangxiaoyan/assets/js/33.4fd282b8.js"><link rel="prefetch" href="/zhuangxiaoyan/assets/js/34.3a5d80ea.js"><link rel="prefetch" href="/zhuangxiaoyan/assets/js/35.46a3fd70.js"><link rel="prefetch" href="/zhuangxiaoyan/assets/js/36.a4d7d4a0.js"><link rel="prefetch" href="/zhuangxiaoyan/assets/js/37.f4563f51.js"><link rel="prefetch" href="/zhuangxiaoyan/assets/js/38.a4755c56.js"><link rel="prefetch" href="/zhuangxiaoyan/assets/js/39.38a44f79.js"><link rel="prefetch" href="/zhuangxiaoyan/assets/js/4.4d57c8c0.js"><link rel="prefetch" href="/zhuangxiaoyan/assets/js/40.7ace36ef.js"><link rel="prefetch" href="/zhuangxiaoyan/assets/js/41.16f6b68f.js"><link rel="prefetch" href="/zhuangxiaoyan/assets/js/42.6d72579b.js"><link rel="prefetch" href="/zhuangxiaoyan/assets/js/43.c87acddc.js"><link rel="prefetch" href="/zhuangxiaoyan/assets/js/44.29fd9c56.js"><link rel="prefetch" href="/zhuangxiaoyan/assets/js/45.1e066d5b.js"><link rel="prefetch" href="/zhuangxiaoyan/assets/js/46.38a90e06.js"><link rel="prefetch" href="/zhuangxiaoyan/assets/js/47.d01627f0.js"><link rel="prefetch" href="/zhuangxiaoyan/assets/js/48.a24f2064.js"><link rel="prefetch" href="/zhuangxiaoyan/assets/js/49.b385ae96.js"><link rel="prefetch" href="/zhuangxiaoyan/assets/js/5.113b6e17.js"><link rel="prefetch" href="/zhuangxiaoyan/assets/js/50.36614d52.js"><link rel="prefetch" href="/zhuangxiaoyan/assets/js/51.0a4de0f4.js"><link rel="prefetch" href="/zhuangxiaoyan/assets/js/52.f34a7e67.js"><link rel="prefetch" href="/zhuangxiaoyan/assets/js/53.628cf4ca.js"><link rel="prefetch" href="/zhuangxiaoyan/assets/js/54.cc220f8a.js"><link rel="prefetch" href="/zhuangxiaoyan/assets/js/55.44be834a.js"><link rel="prefetch" href="/zhuangxiaoyan/assets/js/56.a10f9160.js"><link rel="prefetch" href="/zhuangxiaoyan/assets/js/57.889877cb.js"><link rel="prefetch" href="/zhuangxiaoyan/assets/js/58.35998118.js"><link rel="prefetch" href="/zhuangxiaoyan/assets/js/59.a96ac910.js"><link rel="prefetch" href="/zhuangxiaoyan/assets/js/6.1a9b2f20.js"><link rel="prefetch" href="/zhuangxiaoyan/assets/js/60.69ed00aa.js"><link rel="prefetch" href="/zhuangxiaoyan/assets/js/61.cd318979.js"><link rel="prefetch" href="/zhuangxiaoyan/assets/js/62.c1d36d16.js"><link rel="prefetch" href="/zhuangxiaoyan/assets/js/63.d5921184.js"><link rel="prefetch" href="/zhuangxiaoyan/assets/js/64.e337ae65.js"><link rel="prefetch" href="/zhuangxiaoyan/assets/js/65.4754688d.js"><link rel="prefetch" href="/zhuangxiaoyan/assets/js/66.f1e18825.js"><link rel="prefetch" href="/zhuangxiaoyan/assets/js/67.90234ef8.js"><link rel="prefetch" href="/zhuangxiaoyan/assets/js/68.17c41d12.js"><link rel="prefetch" href="/zhuangxiaoyan/assets/js/69.d424f938.js"><link rel="prefetch" href="/zhuangxiaoyan/assets/js/7.713b03d2.js"><link rel="prefetch" href="/zhuangxiaoyan/assets/js/70.dcbc2969.js"><link rel="prefetch" href="/zhuangxiaoyan/assets/js/71.7dce671a.js"><link rel="prefetch" href="/zhuangxiaoyan/assets/js/72.ca24dbed.js"><link rel="prefetch" href="/zhuangxiaoyan/assets/js/73.3746d1d5.js"><link rel="prefetch" href="/zhuangxiaoyan/assets/js/74.b57bc73f.js"><link rel="prefetch" href="/zhuangxiaoyan/assets/js/75.9bcbf8d9.js"><link rel="prefetch" href="/zhuangxiaoyan/assets/js/76.ad9819f6.js"><link rel="prefetch" href="/zhuangxiaoyan/assets/js/77.1939880d.js"><link rel="prefetch" href="/zhuangxiaoyan/assets/js/78.d4fe71a2.js"><link rel="prefetch" href="/zhuangxiaoyan/assets/js/79.95e3a69e.js"><link rel="prefetch" href="/zhuangxiaoyan/assets/js/8.4562fbf2.js"><link rel="prefetch" href="/zhuangxiaoyan/assets/js/80.0c9cbcee.js"><link rel="prefetch" href="/zhuangxiaoyan/assets/js/81.9f9d8638.js"><link rel="prefetch" href="/zhuangxiaoyan/assets/js/82.4aeef92d.js"><link rel="prefetch" href="/zhuangxiaoyan/assets/js/83.d69f52f7.js"><link rel="prefetch" href="/zhuangxiaoyan/assets/js/84.a5ef042c.js"><link rel="prefetch" href="/zhuangxiaoyan/assets/js/85.c37ffab6.js"><link rel="prefetch" href="/zhuangxiaoyan/assets/js/86.6d5b65db.js"><link rel="prefetch" href="/zhuangxiaoyan/assets/js/87.afa8b536.js"><link rel="prefetch" href="/zhuangxiaoyan/assets/js/88.1c19772d.js"><link rel="prefetch" href="/zhuangxiaoyan/assets/js/89.5f70dc04.js"><link rel="prefetch" href="/zhuangxiaoyan/assets/js/9.7d7583a8.js"><link rel="prefetch" href="/zhuangxiaoyan/assets/js/90.2a690c79.js"><link rel="prefetch" href="/zhuangxiaoyan/assets/js/91.4d0be90d.js"><link rel="prefetch" href="/zhuangxiaoyan/assets/js/92.d82b3978.js"><link rel="prefetch" href="/zhuangxiaoyan/assets/js/93.50ab1b48.js"><link rel="prefetch" href="/zhuangxiaoyan/assets/js/94.b8bd6e2a.js"><link rel="prefetch" href="/zhuangxiaoyan/assets/js/95.1fc4557e.js"><link rel="prefetch" href="/zhuangxiaoyan/assets/js/96.7063edd6.js"><link rel="prefetch" href="/zhuangxiaoyan/assets/js/97.a7fd9d56.js"><link rel="prefetch" href="/zhuangxiaoyan/assets/js/98.c7605566.js"><link rel="prefetch" href="/zhuangxiaoyan/assets/js/99.6fe2324c.js">
    <link rel="stylesheet" href="/zhuangxiaoyan/assets/css/0.styles.43ec611f.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/zhuangxiaoyan/" class="home-link router-link-active"><!----> <span class="site-name">庄小焱</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/zhuangxiaoyan/resume/" class="nav-link">
  庄小焱简历
</a></div><div class="nav-item"><a href="/zhuangxiaoyan/blog/" class="nav-link">
  庄小焱博客
</a></div><div class="nav-item"><a href="/zhuangxiaoyan/project/" class="nav-link">
  实战项目
</a></div><div class="nav-item"><a href="/zhuangxiaoyan/interview/" class="nav-link router-link-active">
  面试项目
</a></div><div class="nav-item"><a href="/zhuangxiaoyan/ai/" class="nav-link">
  AI项目
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="个人账号" class="dropdown-title"><span class="title">个人账号</span> <span class="arrow down"></span></button> <button type="button" aria-label="个人账号" class="mobile-dropdown-title"><span class="title">个人账号</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://zhuang-xiaoyan.github.io/zhuangxiaoyan/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  庄小焱-博客
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://github.com/Zhuang-XiaoYan" target="_blank" rel="noopener noreferrer" class="nav-link external">
  庄小焱-Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://gitee.com/xjl2462612540" target="_blank" rel="noopener noreferrer" class="nav-link external">
  庄小焱-Gitee
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://blog.csdn.net/weixin_41605937" target="_blank" rel="noopener noreferrer" class="nav-link external">
  庄小焱-CSDN
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/zhuangxiaoyan/resume/" class="nav-link">
  庄小焱简历
</a></div><div class="nav-item"><a href="/zhuangxiaoyan/blog/" class="nav-link">
  庄小焱博客
</a></div><div class="nav-item"><a href="/zhuangxiaoyan/project/" class="nav-link">
  实战项目
</a></div><div class="nav-item"><a href="/zhuangxiaoyan/interview/" class="nav-link router-link-active">
  面试项目
</a></div><div class="nav-item"><a href="/zhuangxiaoyan/ai/" class="nav-link">
  AI项目
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="个人账号" class="dropdown-title"><span class="title">个人账号</span> <span class="arrow down"></span></button> <button type="button" aria-label="个人账号" class="mobile-dropdown-title"><span class="title">个人账号</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://zhuang-xiaoyan.github.io/zhuangxiaoyan/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  庄小焱-博客
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://github.com/Zhuang-XiaoYan" target="_blank" rel="noopener noreferrer" class="nav-link external">
  庄小焱-Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://gitee.com/xjl2462612540" target="_blank" rel="noopener noreferrer" class="nav-link external">
  庄小焱-Gitee
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://blog.csdn.net/weixin_41605937" target="_blank" rel="noopener noreferrer" class="nav-link external">
  庄小焱-CSDN
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>分布式设计</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/zhuangxiaoyan/interview/" aria-current="page" class="sidebar-link">场景面试问题总结</a></li><li><a href="/zhuangxiaoyan/interview/distributed-arithmetic.html" class="sidebar-link">分布式原理算法</a></li><li><a href="/zhuangxiaoyan/interview/distributed-id.html" class="sidebar-link">分布式ID原理与设计</a></li><li><a href="/zhuangxiaoyan/interview/distributed-lock.html" class="sidebar-link">分布式锁原理与设计</a></li><li><a href="/zhuangxiaoyan/interview/distributed-transaction.html" class="sidebar-link">分布式事务原理与设计</a></li><li><a href="/zhuangxiaoyan/interview/distributed-throttling.html" class="sidebar-link">分布式限流原理与设计</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Java语言</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/zhuangxiaoyan/interview/java-base.html" class="sidebar-link">java面试问题</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>数据库</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/zhuangxiaoyan/interview/mysql.html" class="sidebar-link">Mysql面试问题</a></li><li><a href="/zhuangxiaoyan/interview/mysql-backup.html" class="sidebar-link">数据库与缓存一致性</a></li><li><a href="/zhuangxiaoyan/interview/mysql-cluster.html" class="sidebar-link">Mysql主从问题</a></li><li><a href="/zhuangxiaoyan/interview/mysql-slow-query.html" class="sidebar-link">数据查询优化设计</a></li><li><a href="/zhuangxiaoyan/interview/mysql-split-table.html" class="sidebar-link">数据分库分表设计</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>并发编程</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/zhuangxiaoyan/interview/juc.html" class="sidebar-link">JUC面试问题</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>源码分析</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/zhuangxiaoyan/interview/jdk.html" class="sidebar-link">JDK面试问题</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>虚拟机</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/zhuangxiaoyan/interview/jvm.html" class="sidebar-link">JVM面试问题</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>计算机网络</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/zhuangxiaoyan/interview/network.html" class="sidebar-link">网络面试问题</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>操作系统</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/zhuangxiaoyan/interview/os.html" class="sidebar-link">OS面试问题</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Spring框架</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/zhuangxiaoyan/interview/spring.html" class="sidebar-link">spring面试问题</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Spring-Cloud框架</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/zhuangxiaoyan/interview/spring-cloud.html" class="sidebar-link">SpringCloud面试问题</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>设计模式</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/zhuangxiaoyan/interview/pattern.html" class="sidebar-link">设计模式面试问题</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Redis中间件</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/zhuangxiaoyan/interview/redis.html" class="sidebar-link">Redis面试问题</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Mybatis框架</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/zhuangxiaoyan/interview/mybatis.html" class="sidebar-link">Mybatis面试问题</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>MQ框架</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/zhuangxiaoyan/interview/mq.html" class="sidebar-link">MQ面试问题</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Nginx框架</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/zhuangxiaoyan/interview/nginx.html" class="sidebar-link">nginx面试问题</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>微服务设计</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/zhuangxiaoyan/interview/micro-idempotent.html" class="sidebar-link">幂等性原理与设计</a></li><li><a href="/zhuangxiaoyan/interview/micro-auth.html" class="sidebar-link">认证授权设计</a></li><li><a href="/zhuangxiaoyan/interview/micro-encryption.html" class="sidebar-link">加密算法总结</a></li><li><a href="/zhuangxiaoyan/interview/micro-other.html" class="sidebar-link">综合场景面试问题</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="zookeeper面试问题"><a href="#zookeeper面试问题" class="header-anchor">#</a> Zookeeper面试问题</h1> <h2 id="zookeeper如何实现leader选举"><a href="#zookeeper如何实现leader选举" class="header-anchor">#</a> Zookeeper如何实现Leader选举</h2> <p>首先，Zookeeper集群节点由三种角色组成，分别是</p> <ol><li>Leader，负责所有事务请求的处理，以及过半提交的投票发起和决策。</li> <li>Follower，负责接收客户端的非事务请求，而事务请求会转发给Leader节点来处理，另外，Follower节点还会参与Leader选举的投票。</li> <li>Observer，负责接收客户端的非事务请求，事务请求会转发给Leader节点来处理，另外Observer节点不参与任何投票，只是为了扩展Zookeeper集群来分担读操作的压力。</li></ol> <p><img src="data:image/png;base64,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" alt="img.png"></p> <p>其次，Zookeeper集群是一种典型的中心化架构，也就是会有一个Leader作为决策节点，专门负责事务请求的处理和数据的同步。
这种架构的好处是可以减少集群架构里面数据同步的复杂度，集群管理会更加简单和稳定。
但是，会带来Leader选举的一个问题，也就是说，（如图）如果Leader节点宕机了，为了保证集群继续提供可靠的服务，
Zookeeper需要从剩下的Follower节点里面去选举一个新的节点作为Leader，也就是所谓的Leader选举！</p> <p><img src="/zhuangxiaoyan/assets/img/zookeeper-election02.ea995ac2.png" alt="img.png"></p> <p>每一个节点都会向集群里面的其他节点发送一个票据Vote，这个票据包括三个属性。</p> <ul><li>epoch， 逻辑时钟，用来表示当前票据是否过期。(因为网络通信延迟的可能性，有可能在新一轮的投票里面收到上一轮投票的票据，这种数据应该丢弃，否则会影响投票的结果和效率)</li> <li>zxid，事务id，表示当前节点最新存储的数据的事务编号(因为网络通信延迟的可能性，有可能在新一轮的投票里面收到上一轮投票的票据，这种数据应该丢弃，否则会影响投票的结果和效率。)</li> <li>myid，服务器id，在myid文件里面填写的数字。(因为网络通信延迟的可能性，有可能在新一轮的投票里面收到上一轮投票的票据，这种数据应该丢弃，否则会影响投票的结果和效率)</li></ul> <p>每个节点都会选自己当Leader，所以第一次投票的时候携带的是当前节点的信息。接下来每个节点用收到的票据和自己节点的票据做比较，根据epoch、zxid、myid的顺序逐一比较，
以值最大的一方获胜。比较结束以后这个节点下次再投票的时候，发送的投票请求就是获胜的Vote信息。</p> <p><img src="/zhuangxiaoyan/assets/img/zookeeper-election03.4d60adc7.png" alt="img.png"></p> <p>然后通过多轮投票以后，每个节点都会去统计当前达成一致的票据，以少数服从多数的方式，最终获得票据最多的节点成为Leader。</p> <h2 id="zookeeper中的watch机制的原理"><a href="#zookeeper中的watch机制的原理" class="header-anchor">#</a> Zookeeper中的Watch机制的原理？</h2> <p>Zookeeper是一个分布式协调组件，为分布式架构下的多个应用组件提供了顺序访问控制能力。它的数据存储采用了类似于文件系统的树形结构，以节点的方式来管理存储在Zookeeper上的数据.</p> <p><img src="data:image/png;base64,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" alt="img.png"></p> <p>Zookeeper提供了一个Watch机制，可以让客户端感知到Zookeeper Server上存储的数据变化，这样一种机制可以让Zookeeper实现很多的场景，比如配置中心、注册中心等。</p> <p><img src="data:image/png;base64,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" alt="img.png"></p> <p>Watch机制采用了Push的方式来实现，也就是说客户端和Zookeeper Server会建立一个长连接，一旦监听的指定节点发生了变化，就会通过这个长连接把变化的事件推送给客户端。</p> <p>Watch的具体流程分为几个部分：</p> <ul><li>首先，是客户端通过指定命令比如exists、get，对特定路径增加watch</li> <li>然后服务端收到请求以后，用HashMap保存这个客户端会话以及对应关注的节点路径，同时客户端也会使用HashMap存储指定节点和事件回调函数的对应关系。</li> <li>当服务端指定被watch的节点发生变化后，就会找到这个节点对应的会话，把变化的事件和节点信息发给这个客户端。</li> <li>客户端收到请求以后，从ZkWatcherManager里面对应的回调方法进行调用，完成事件变更的通知。</li></ul> <p><img src="/zhuangxiaoyan/assets/img/watch03.6bdef133.png" alt="img.png"></p> <h2 id="dubbo是如何动态感知服务下线的"><a href="#dubbo是如何动态感知服务下线的" class="header-anchor">#</a> Dubbo是如何动态感知服务下线的？</h2> <p>首先，Dubbo默认采用Zookeeper实现服务的注册与服务发现，简单来说啊，就是多个Dubbo服务之间的通信地址，是使用Zookeeper来维护的。
在Zookeeper上，会采用树形结构的方式来维护Dubbo服务提供端的协议地址。</p> <p><img src="/zhuangxiaoyan/assets/img/Dubbo01.c5d6e358.png" alt="img.png"></p> <p>Dubbo服务消费端会从Zookeeper Server上去查找目标服务的地址列表，从而完成服务的注册和消费的功能。
Zookeeper会通过心跳检测机制，来判断Dubbo服务提供端的运行状态，来决定是否应该把这个服务从地址列表剔除。</p> <p><img src="/zhuangxiaoyan/assets/img/Dubbo02.74ecc866.png" alt="img.png"></p> <p>当Dubbo服务提供方出现故障导致Zookeeper剔除了这个服务的地址，
那么Dubbo服务消费端需要感知到地址的变化，从而避免后续的请求发送到故障节点，导致请求失败。
也就是说Dubbo要提供服务下线的动态感知能力。这个能力是通过Zookeeper里面提供的Watch机制来实现的</p> <p><img src="/zhuangxiaoyan/assets/img/Dubbo03.77379119.png" alt="img.png"></p> <p>简单来说呢，Dubbo服务消费端会使用Zookeeper里面的Watch来针对Zookeeper Server端的/providers节点注册监听，
一旦这个节点下的子节点发生变化，Zookeeper Server就会发送一个事件通知Dubbo Client端.
Dubbo Client端收到事件以后，就会把本地缓存的这个服务地址删除，这样后续就不会把请求发送到失败的节点上，完成服务下线感知。</p></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"><!----></div></div>
    <script src="/zhuangxiaoyan/assets/js/app.868ae4fe.js" defer></script><script src="/zhuangxiaoyan/assets/js/2.e0e92cc0.js" defer></script><script src="/zhuangxiaoyan/assets/js/12.14f9a7e9.js" defer></script>
  </body>
</html>
