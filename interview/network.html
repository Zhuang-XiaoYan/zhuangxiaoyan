<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>网络面试问题 | 庄小焱</title>
    <meta name="generator" content="VuePress 1.7.1">
    
    <meta name="description" content="我是庄小焱，PMP项目管理专家、系统架构设计师(高级)、CSDN博文专家、后端开发工程师。 博主在微服务、虚拟化、系统架构、大数据、机器学习领域不断学习，同时在博客中分享自己学习知识和相关技术， 欢迎大家和我交流学习，欢迎大家关注我的博客。">
    
    <link rel="preload" href="/zhuangxiaoyan/assets/css/0.styles.43ec611f.css" as="style"><link rel="preload" href="/zhuangxiaoyan/assets/js/app.868ae4fe.js" as="script"><link rel="preload" href="/zhuangxiaoyan/assets/js/2.e0e92cc0.js" as="script"><link rel="preload" href="/zhuangxiaoyan/assets/js/11.8bbceb5f.js" as="script"><link rel="prefetch" href="/zhuangxiaoyan/assets/js/10.f03f824c.js"><link rel="prefetch" href="/zhuangxiaoyan/assets/js/12.14f9a7e9.js"><link rel="prefetch" href="/zhuangxiaoyan/assets/js/13.875c4422.js"><link rel="prefetch" href="/zhuangxiaoyan/assets/js/14.b913d772.js"><link rel="prefetch" href="/zhuangxiaoyan/assets/js/15.04d0022c.js"><link rel="prefetch" href="/zhuangxiaoyan/assets/js/16.2f5474ed.js"><link rel="prefetch" href="/zhuangxiaoyan/assets/js/17.314561f8.js"><link rel="prefetch" href="/zhuangxiaoyan/assets/js/18.4f00aff9.js"><link rel="prefetch" href="/zhuangxiaoyan/assets/js/19.3198a9c6.js"><link rel="prefetch" href="/zhuangxiaoyan/assets/js/20.6ca58bc3.js"><link rel="prefetch" href="/zhuangxiaoyan/assets/js/21.2b13b489.js"><link rel="prefetch" href="/zhuangxiaoyan/assets/js/22.1ab1c76c.js"><link rel="prefetch" href="/zhuangxiaoyan/assets/js/23.71e25b05.js"><link rel="prefetch" href="/zhuangxiaoyan/assets/js/24.ad6ea50e.js"><link rel="prefetch" href="/zhuangxiaoyan/assets/js/25.76e0a373.js"><link rel="prefetch" href="/zhuangxiaoyan/assets/js/26.b9862941.js"><link rel="prefetch" href="/zhuangxiaoyan/assets/js/27.aa410472.js"><link rel="prefetch" href="/zhuangxiaoyan/assets/js/28.03808d20.js"><link rel="prefetch" href="/zhuangxiaoyan/assets/js/29.00bd7baa.js"><link rel="prefetch" href="/zhuangxiaoyan/assets/js/3.08485426.js"><link rel="prefetch" href="/zhuangxiaoyan/assets/js/30.005c22a8.js"><link rel="prefetch" href="/zhuangxiaoyan/assets/js/31.93f0d38f.js"><link rel="prefetch" href="/zhuangxiaoyan/assets/js/32.340f8c91.js"><link rel="prefetch" href="/zhuangxiaoyan/assets/js/33.4fd282b8.js"><link rel="prefetch" href="/zhuangxiaoyan/assets/js/34.3a5d80ea.js"><link rel="prefetch" href="/zhuangxiaoyan/assets/js/35.46a3fd70.js"><link rel="prefetch" href="/zhuangxiaoyan/assets/js/36.a4d7d4a0.js"><link rel="prefetch" href="/zhuangxiaoyan/assets/js/37.f4563f51.js"><link rel="prefetch" href="/zhuangxiaoyan/assets/js/38.a4755c56.js"><link rel="prefetch" href="/zhuangxiaoyan/assets/js/39.38a44f79.js"><link rel="prefetch" href="/zhuangxiaoyan/assets/js/4.4d57c8c0.js"><link rel="prefetch" href="/zhuangxiaoyan/assets/js/40.7ace36ef.js"><link rel="prefetch" href="/zhuangxiaoyan/assets/js/41.16f6b68f.js"><link rel="prefetch" href="/zhuangxiaoyan/assets/js/42.6d72579b.js"><link rel="prefetch" href="/zhuangxiaoyan/assets/js/43.c87acddc.js"><link rel="prefetch" href="/zhuangxiaoyan/assets/js/44.29fd9c56.js"><link rel="prefetch" href="/zhuangxiaoyan/assets/js/45.1e066d5b.js"><link rel="prefetch" href="/zhuangxiaoyan/assets/js/46.38a90e06.js"><link rel="prefetch" href="/zhuangxiaoyan/assets/js/47.d01627f0.js"><link rel="prefetch" href="/zhuangxiaoyan/assets/js/48.a24f2064.js"><link rel="prefetch" href="/zhuangxiaoyan/assets/js/49.b385ae96.js"><link rel="prefetch" href="/zhuangxiaoyan/assets/js/5.113b6e17.js"><link rel="prefetch" href="/zhuangxiaoyan/assets/js/50.36614d52.js"><link rel="prefetch" href="/zhuangxiaoyan/assets/js/51.0a4de0f4.js"><link rel="prefetch" href="/zhuangxiaoyan/assets/js/52.f34a7e67.js"><link rel="prefetch" href="/zhuangxiaoyan/assets/js/53.628cf4ca.js"><link rel="prefetch" href="/zhuangxiaoyan/assets/js/54.cc220f8a.js"><link rel="prefetch" href="/zhuangxiaoyan/assets/js/55.44be834a.js"><link rel="prefetch" href="/zhuangxiaoyan/assets/js/56.a10f9160.js"><link rel="prefetch" href="/zhuangxiaoyan/assets/js/57.889877cb.js"><link rel="prefetch" href="/zhuangxiaoyan/assets/js/58.35998118.js"><link rel="prefetch" href="/zhuangxiaoyan/assets/js/59.a96ac910.js"><link rel="prefetch" href="/zhuangxiaoyan/assets/js/6.1a9b2f20.js"><link rel="prefetch" href="/zhuangxiaoyan/assets/js/60.69ed00aa.js"><link rel="prefetch" href="/zhuangxiaoyan/assets/js/61.cd318979.js"><link rel="prefetch" href="/zhuangxiaoyan/assets/js/62.c1d36d16.js"><link rel="prefetch" href="/zhuangxiaoyan/assets/js/63.d5921184.js"><link rel="prefetch" href="/zhuangxiaoyan/assets/js/64.e337ae65.js"><link rel="prefetch" href="/zhuangxiaoyan/assets/js/65.4754688d.js"><link rel="prefetch" href="/zhuangxiaoyan/assets/js/66.f1e18825.js"><link rel="prefetch" href="/zhuangxiaoyan/assets/js/67.90234ef8.js"><link rel="prefetch" href="/zhuangxiaoyan/assets/js/68.17c41d12.js"><link rel="prefetch" href="/zhuangxiaoyan/assets/js/69.d424f938.js"><link rel="prefetch" href="/zhuangxiaoyan/assets/js/7.713b03d2.js"><link rel="prefetch" href="/zhuangxiaoyan/assets/js/70.dcbc2969.js"><link rel="prefetch" href="/zhuangxiaoyan/assets/js/71.7dce671a.js"><link rel="prefetch" href="/zhuangxiaoyan/assets/js/72.ca24dbed.js"><link rel="prefetch" href="/zhuangxiaoyan/assets/js/73.3746d1d5.js"><link rel="prefetch" href="/zhuangxiaoyan/assets/js/74.b57bc73f.js"><link rel="prefetch" href="/zhuangxiaoyan/assets/js/75.9bcbf8d9.js"><link rel="prefetch" href="/zhuangxiaoyan/assets/js/76.ad9819f6.js"><link rel="prefetch" href="/zhuangxiaoyan/assets/js/77.1939880d.js"><link rel="prefetch" href="/zhuangxiaoyan/assets/js/78.d4fe71a2.js"><link rel="prefetch" href="/zhuangxiaoyan/assets/js/79.95e3a69e.js"><link rel="prefetch" href="/zhuangxiaoyan/assets/js/8.4562fbf2.js"><link rel="prefetch" href="/zhuangxiaoyan/assets/js/80.0c9cbcee.js"><link rel="prefetch" href="/zhuangxiaoyan/assets/js/81.9f9d8638.js"><link rel="prefetch" href="/zhuangxiaoyan/assets/js/82.4aeef92d.js"><link rel="prefetch" href="/zhuangxiaoyan/assets/js/83.d69f52f7.js"><link rel="prefetch" href="/zhuangxiaoyan/assets/js/84.a5ef042c.js"><link rel="prefetch" href="/zhuangxiaoyan/assets/js/85.c37ffab6.js"><link rel="prefetch" href="/zhuangxiaoyan/assets/js/86.6d5b65db.js"><link rel="prefetch" href="/zhuangxiaoyan/assets/js/87.afa8b536.js"><link rel="prefetch" href="/zhuangxiaoyan/assets/js/88.1c19772d.js"><link rel="prefetch" href="/zhuangxiaoyan/assets/js/89.5f70dc04.js"><link rel="prefetch" href="/zhuangxiaoyan/assets/js/9.7d7583a8.js"><link rel="prefetch" href="/zhuangxiaoyan/assets/js/90.2a690c79.js"><link rel="prefetch" href="/zhuangxiaoyan/assets/js/91.4d0be90d.js"><link rel="prefetch" href="/zhuangxiaoyan/assets/js/92.d82b3978.js"><link rel="prefetch" href="/zhuangxiaoyan/assets/js/93.50ab1b48.js"><link rel="prefetch" href="/zhuangxiaoyan/assets/js/94.b8bd6e2a.js"><link rel="prefetch" href="/zhuangxiaoyan/assets/js/95.1fc4557e.js"><link rel="prefetch" href="/zhuangxiaoyan/assets/js/96.7063edd6.js"><link rel="prefetch" href="/zhuangxiaoyan/assets/js/97.a7fd9d56.js"><link rel="prefetch" href="/zhuangxiaoyan/assets/js/98.c7605566.js"><link rel="prefetch" href="/zhuangxiaoyan/assets/js/99.6fe2324c.js">
    <link rel="stylesheet" href="/zhuangxiaoyan/assets/css/0.styles.43ec611f.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/zhuangxiaoyan/" class="home-link router-link-active"><!----> <span class="site-name">庄小焱</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/zhuangxiaoyan/resume/" class="nav-link">
  庄小焱简历
</a></div><div class="nav-item"><a href="/zhuangxiaoyan/blog/" class="nav-link">
  庄小焱博客
</a></div><div class="nav-item"><a href="/zhuangxiaoyan/project/" class="nav-link">
  实战项目
</a></div><div class="nav-item"><a href="/zhuangxiaoyan/interview/" class="nav-link router-link-active">
  面试项目
</a></div><div class="nav-item"><a href="/zhuangxiaoyan/ai/" class="nav-link">
  AI项目
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="个人账号" class="dropdown-title"><span class="title">个人账号</span> <span class="arrow down"></span></button> <button type="button" aria-label="个人账号" class="mobile-dropdown-title"><span class="title">个人账号</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://zhuang-xiaoyan.github.io/zhuangxiaoyan/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  庄小焱-博客
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://github.com/Zhuang-XiaoYan" target="_blank" rel="noopener noreferrer" class="nav-link external">
  庄小焱-Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://gitee.com/xjl2462612540" target="_blank" rel="noopener noreferrer" class="nav-link external">
  庄小焱-Gitee
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://blog.csdn.net/weixin_41605937" target="_blank" rel="noopener noreferrer" class="nav-link external">
  庄小焱-CSDN
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/zhuangxiaoyan/resume/" class="nav-link">
  庄小焱简历
</a></div><div class="nav-item"><a href="/zhuangxiaoyan/blog/" class="nav-link">
  庄小焱博客
</a></div><div class="nav-item"><a href="/zhuangxiaoyan/project/" class="nav-link">
  实战项目
</a></div><div class="nav-item"><a href="/zhuangxiaoyan/interview/" class="nav-link router-link-active">
  面试项目
</a></div><div class="nav-item"><a href="/zhuangxiaoyan/ai/" class="nav-link">
  AI项目
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="个人账号" class="dropdown-title"><span class="title">个人账号</span> <span class="arrow down"></span></button> <button type="button" aria-label="个人账号" class="mobile-dropdown-title"><span class="title">个人账号</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://zhuang-xiaoyan.github.io/zhuangxiaoyan/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  庄小焱-博客
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://github.com/Zhuang-XiaoYan" target="_blank" rel="noopener noreferrer" class="nav-link external">
  庄小焱-Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://gitee.com/xjl2462612540" target="_blank" rel="noopener noreferrer" class="nav-link external">
  庄小焱-Gitee
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://blog.csdn.net/weixin_41605937" target="_blank" rel="noopener noreferrer" class="nav-link external">
  庄小焱-CSDN
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>分布式设计</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/zhuangxiaoyan/interview/" aria-current="page" class="sidebar-link">场景面试问题总结</a></li><li><a href="/zhuangxiaoyan/interview/distributed-arithmetic.html" class="sidebar-link">分布式原理算法</a></li><li><a href="/zhuangxiaoyan/interview/distributed-id.html" class="sidebar-link">分布式ID原理与设计</a></li><li><a href="/zhuangxiaoyan/interview/distributed-lock.html" class="sidebar-link">分布式锁原理与设计</a></li><li><a href="/zhuangxiaoyan/interview/distributed-transaction.html" class="sidebar-link">分布式事务原理与设计</a></li><li><a href="/zhuangxiaoyan/interview/distributed-throttling.html" class="sidebar-link">分布式限流原理与设计</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Java语言</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/zhuangxiaoyan/interview/java-base.html" class="sidebar-link">java面试问题</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>数据库</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/zhuangxiaoyan/interview/mysql.html" class="sidebar-link">Mysql面试问题</a></li><li><a href="/zhuangxiaoyan/interview/mysql-backup.html" class="sidebar-link">数据库与缓存一致性</a></li><li><a href="/zhuangxiaoyan/interview/mysql-cluster.html" class="sidebar-link">Mysql主从问题</a></li><li><a href="/zhuangxiaoyan/interview/mysql-slow-query.html" class="sidebar-link">数据查询优化设计</a></li><li><a href="/zhuangxiaoyan/interview/mysql-split-table.html" class="sidebar-link">数据分库分表设计</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>并发编程</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/zhuangxiaoyan/interview/juc.html" class="sidebar-link">JUC面试问题</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>源码分析</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/zhuangxiaoyan/interview/jdk.html" class="sidebar-link">JDK面试问题</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>虚拟机</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/zhuangxiaoyan/interview/jvm.html" class="sidebar-link">JVM面试问题</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>计算机网络</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/zhuangxiaoyan/interview/network.html" aria-current="page" class="active sidebar-link">网络面试问题</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/zhuangxiaoyan/interview/network.html#七层网络模型与五层模型" class="sidebar-link">七层网络模型与五层模型</a></li><li class="sidebar-sub-header"><a href="/zhuangxiaoyan/interview/network.html#linux的虚拟网络模型" class="sidebar-link">linux的虚拟网络模型</a></li><li class="sidebar-sub-header"><a href="/zhuangxiaoyan/interview/network.html#http八种请求方法" class="sidebar-link">HTTP八种请求方法</a></li><li class="sidebar-sub-header"><a href="/zhuangxiaoyan/interview/network.html#session和cookie原理" class="sidebar-link">session和cookie原理</a></li><li class="sidebar-sub-header"><a href="/zhuangxiaoyan/interview/network.html#cookie和session的区别" class="sidebar-link">Cookie和Session的区别</a></li><li class="sidebar-sub-header"><a href="/zhuangxiaoyan/interview/network.html#get与post的区别" class="sidebar-link">get与post的区别</a></li><li class="sidebar-sub-header"><a href="/zhuangxiaoyan/interview/network.html#http三次握手原理" class="sidebar-link">HTTP三次握手原理</a></li><li class="sidebar-sub-header"><a href="/zhuangxiaoyan/interview/network.html#为什么是三次握手-不是两次、四次" class="sidebar-link">为什么是三次握手？不是两次、四次？</a></li><li class="sidebar-sub-header"><a href="/zhuangxiaoyan/interview/network.html#三次握手过程中是否可以携带数据" class="sidebar-link">三次握手过程中是否可以携带数据</a></li><li class="sidebar-sub-header"><a href="/zhuangxiaoyan/interview/network.html#三次握手是如何避免重复历史连接的初始化" class="sidebar-link">三次握⼿是如何避免重复历史连接的初始化？</a></li><li class="sidebar-sub-header"><a href="/zhuangxiaoyan/interview/network.html#三次握手才如何同步双方序列号" class="sidebar-link">三次握手才如何同步双方序列号</a></li><li class="sidebar-sub-header"><a href="/zhuangxiaoyan/interview/network.html#三次握手才怎样避免资源浪费" class="sidebar-link">三次握⼿才怎样避免资源浪费？</a></li><li class="sidebar-sub-header"><a href="/zhuangxiaoyan/interview/network.html#http四次挥手原理" class="sidebar-link">HTTP四次挥手原理</a></li><li class="sidebar-sub-header"><a href="/zhuangxiaoyan/interview/network.html#为什么需要四次挥手" class="sidebar-link">为什么需要四次挥⼿？</a></li><li class="sidebar-sub-header"><a href="/zhuangxiaoyan/interview/network.html#time-wait等待的时间是2msl" class="sidebar-link">TIME_WAIT等待的时间是2MSL？</a></li><li class="sidebar-sub-header"><a href="/zhuangxiaoyan/interview/network.html#msl与ttl的区别" class="sidebar-link">MSL与TTL的区别</a></li><li class="sidebar-sub-header"><a href="/zhuangxiaoyan/interview/network.html#为什么需要time-wait状态" class="sidebar-link">为什么需要TIME_WAIT状态？</a></li><li class="sidebar-sub-header"><a href="/zhuangxiaoyan/interview/network.html#time-wait过长有什么危害" class="sidebar-link">TIME_WAIT过长有什么危害</a></li><li class="sidebar-sub-header"><a href="/zhuangxiaoyan/interview/network.html#http状态码有那些" class="sidebar-link">HTTP状态码有那些</a></li><li class="sidebar-sub-header"><a href="/zhuangxiaoyan/interview/network.html#http1-0优点" class="sidebar-link">HTTP1.0优点</a></li><li class="sidebar-sub-header"><a href="/zhuangxiaoyan/interview/network.html#http1-0缺点" class="sidebar-link">HTTP1.0缺点</a></li><li class="sidebar-sub-header"><a href="/zhuangxiaoyan/interview/network.html#http-1-1性能改进" class="sidebar-link">HTTP/1.1性能改进</a></li><li class="sidebar-sub-header"><a href="/zhuangxiaoyan/interview/network.html#http-1-1性能瓶颈" class="sidebar-link">HTTP/1.1性能瓶颈</a></li><li class="sidebar-sub-header"><a href="/zhuangxiaoyan/interview/network.html#http2-0特性" class="sidebar-link">HTTP2.0特性</a></li><li class="sidebar-sub-header"><a href="/zhuangxiaoyan/interview/network.html#keepalive-timer的作用" class="sidebar-link">keepalive timer的作用</a></li><li class="sidebar-sub-header"><a href="/zhuangxiaoyan/interview/network.html#http1-0-http1-1和http2-0的区别" class="sidebar-link">Http1.0,Http1.1和Http2.0的区别</a></li><li class="sidebar-sub-header"><a href="/zhuangxiaoyan/interview/network.html#http的优化的方式" class="sidebar-link">HTTP的优化的方式</a></li><li class="sidebar-sub-header"><a href="/zhuangxiaoyan/interview/network.html#https连接传输过程" class="sidebar-link">HTTPS连接传输过程</a></li><li class="sidebar-sub-header"><a href="/zhuangxiaoyan/interview/network.html#http与https有哪些区别" class="sidebar-link">HTTP与HTTPS有哪些区别</a></li><li class="sidebar-sub-header"><a href="/zhuangxiaoyan/interview/network.html#https解决了http的安全问题" class="sidebar-link">HTTPS解决了HTTP的安全问题</a></li><li class="sidebar-sub-header"><a href="/zhuangxiaoyan/interview/network.html#https的优化方式" class="sidebar-link">HTTPS的优化方式</a></li><li class="sidebar-sub-header"><a href="/zhuangxiaoyan/interview/network.html#arq协议" class="sidebar-link">ARQ协议</a></li><li class="sidebar-sub-header"><a href="/zhuangxiaoyan/interview/network.html#arp协议" class="sidebar-link">ARP协议</a></li><li class="sidebar-sub-header"><a href="/zhuangxiaoyan/interview/network.html#rarp协议" class="sidebar-link">RARP协议</a></li><li class="sidebar-sub-header"><a href="/zhuangxiaoyan/interview/network.html#icmp协议的功能" class="sidebar-link">ICMP协议的功能</a></li><li class="sidebar-sub-header"><a href="/zhuangxiaoyan/interview/network.html#quic协议原理" class="sidebar-link">QUIC协议原理</a></li><li class="sidebar-sub-header"><a href="/zhuangxiaoyan/interview/network.html#quic协议的优点" class="sidebar-link">QUIC协议的优点</a></li><li class="sidebar-sub-header"><a href="/zhuangxiaoyan/interview/network.html#http-3的特点" class="sidebar-link">HTTP/3的特点</a></li><li class="sidebar-sub-header"><a href="/zhuangxiaoyan/interview/network.html#重传机制的方式" class="sidebar-link">重传机制的方式</a></li><li class="sidebar-sub-header"><a href="/zhuangxiaoyan/interview/network.html#滑动窗口原理" class="sidebar-link">滑动窗口原理</a></li><li class="sidebar-sub-header"><a href="/zhuangxiaoyan/interview/network.html#拥塞控制" class="sidebar-link">拥塞控制</a></li><li class="sidebar-sub-header"><a href="/zhuangxiaoyan/interview/network.html#拥塞控制算法" class="sidebar-link">拥塞控制算法</a></li><li class="sidebar-sub-header"><a href="/zhuangxiaoyan/interview/network.html#tcp和udp区别" class="sidebar-link">TCP和UDP区别：</a></li><li class="sidebar-sub-header"><a href="/zhuangxiaoyan/interview/network.html#tcp和udp应用场景" class="sidebar-link">TCP和UDP应⽤场景</a></li><li class="sidebar-sub-header"><a href="/zhuangxiaoyan/interview/network.html#tcp-协议如何保证可靠传输" class="sidebar-link">TCP 协议如何保证可靠传输？</a></li><li class="sidebar-sub-header"><a href="/zhuangxiaoyan/interview/network.html#什么是syn洪泛" class="sidebar-link">什么是SYN洪泛</a></li><li class="sidebar-sub-header"><a href="/zhuangxiaoyan/interview/network.html#半连接队列与全连接队列" class="sidebar-link">半连接队列与全连接队列</a></li><li class="sidebar-sub-header"><a href="/zhuangxiaoyan/interview/network.html#什么是网络风暴" class="sidebar-link">什么是网络风暴</a></li><li class="sidebar-sub-header"><a href="/zhuangxiaoyan/interview/network.html#网络风暴的原因" class="sidebar-link">网络风暴的原因</a></li><li class="sidebar-sub-header"><a href="/zhuangxiaoyan/interview/network.html#粘包-拆包原理" class="sidebar-link">粘包，拆包原理</a></li><li class="sidebar-sub-header"><a href="/zhuangxiaoyan/interview/network.html#浏览器中的url的全部流程" class="sidebar-link">浏览器中的URL的全部流程</a></li><li class="sidebar-sub-header"><a href="/zhuangxiaoyan/interview/network.html#网站打不开-怎么排查问题" class="sidebar-link">网站打不开，怎么排查问题？</a></li><li class="sidebar-sub-header"><a href="/zhuangxiaoyan/interview/network.html#域名解析的工作流程" class="sidebar-link">域名解析的⼯作流程</a></li><li class="sidebar-sub-header"><a href="/zhuangxiaoyan/interview/network.html#长连接与短连接" class="sidebar-link">长连接与短连接</a></li><li class="sidebar-sub-header"><a href="/zhuangxiaoyan/interview/network.html#长轮询与短轮询" class="sidebar-link">长轮询与短轮询</a></li><li class="sidebar-sub-header"><a href="/zhuangxiaoyan/interview/network.html#csrf攻击" class="sidebar-link">CSRF攻击</a></li><li class="sidebar-sub-header"><a href="/zhuangxiaoyan/interview/network.html#cc攻击与ddos攻击" class="sidebar-link">CC攻击与DDOS攻击</a></li><li class="sidebar-sub-header"><a href="/zhuangxiaoyan/interview/network.html#服务端挂了-客户端的tcp连接还在吗" class="sidebar-link">服务端挂了，客户端的TCP连接还在吗？</a></li><li class="sidebar-sub-header"><a href="/zhuangxiaoyan/interview/network.html#http协议和rpc协议的区别" class="sidebar-link">HTTP协议和RPC协议的区别</a></li><li class="sidebar-sub-header"><a href="/zhuangxiaoyan/interview/network.html#tcp要设计三次握手-我认为有三个方面的原因" class="sidebar-link">TCP要设计三次握手，我认为有三个方面的原因：</a></li><li class="sidebar-sub-header"><a href="/zhuangxiaoyan/interview/network.html#网络四元组" class="sidebar-link">网络四元组</a></li><li class="sidebar-sub-header"><a href="/zhuangxiaoyan/interview/network.html#select-poll-epoll原理" class="sidebar-link">select poll epoll原理</a></li><li class="sidebar-sub-header"><a href="/zhuangxiaoyan/interview/network.html#tcp粘包和拆包与解决方案" class="sidebar-link">TCP粘包和拆包与解决方案</a></li></ul></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>操作系统</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/zhuangxiaoyan/interview/os.html" class="sidebar-link">OS面试问题</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Spring框架</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/zhuangxiaoyan/interview/spring.html" class="sidebar-link">spring面试问题</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Spring-Cloud框架</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/zhuangxiaoyan/interview/spring-cloud.html" class="sidebar-link">SpringCloud面试问题</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>设计模式</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/zhuangxiaoyan/interview/pattern.html" class="sidebar-link">设计模式面试问题</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Redis中间件</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/zhuangxiaoyan/interview/redis.html" class="sidebar-link">Redis面试问题</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Mybatis框架</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/zhuangxiaoyan/interview/mybatis.html" class="sidebar-link">Mybatis面试问题</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>MQ框架</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/zhuangxiaoyan/interview/mq.html" class="sidebar-link">MQ面试问题</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Nginx框架</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/zhuangxiaoyan/interview/nginx.html" class="sidebar-link">nginx面试问题</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>微服务设计</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/zhuangxiaoyan/interview/micro-idempotent.html" class="sidebar-link">幂等性原理与设计</a></li><li><a href="/zhuangxiaoyan/interview/micro-auth.html" class="sidebar-link">认证授权设计</a></li><li><a href="/zhuangxiaoyan/interview/micro-encryption.html" class="sidebar-link">加密算法总结</a></li><li><a href="/zhuangxiaoyan/interview/micro-other.html" class="sidebar-link">综合场景面试问题</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="网络面试问题"><a href="#网络面试问题" class="header-anchor">#</a> 网络面试问题</h1> <h2 id="七层网络模型与五层模型"><a href="#七层网络模型与五层模型" class="header-anchor">#</a> 七层网络模型与五层模型</h2> <img src="/zhuangxiaoyan/interview/network01.png" alt="network01"> <ol start="7"><li>应用层: 网络流程应用（表示的是用户界面，例如Telnet，HTTP）</li> <li>表示层: 数据表示 (数据如何呈现，特殊处理例如加密，比如ASCII，JPEG）</li> <li>会话层: 主机间的通信（将不同应用程序的数据分开。建立，管理和终止应用之间的会话）</li> <li>传输层: 端到端连接（可靠或不可靠的传递，例如TCP，UDP)</li> <li>网络层: 地址和最佳路径（提供路由器用于路径的逻辑寻址，比如IP）</li> <li>数据链路层: 媒体访问（将位组合成字节，将字节组合成帧，使用MAC地址访问，错误检测-比如HDLC）</li> <li>物理层: 二进制传输（在设备之间移动bits。例如V.35）</li></ol> <img src="/zhuangxiaoyan/interview/network02.png" alt="network02"> <ol><li>应用层: 也是我们能直接接触到的就是应用层，我们电脑或手机使用的应用软件都是在应用层实现。</li> <li>传输层: 应用层的数据包会传给传输层，传输层是为应用层提供网络支持的。</li> <li>网络层: 负责网数据传输。</li> <li>数据链路层: 让数据在⼀个链路中传输，这就是数据链路层，它主要为⽹络层提供链路级别传输的服务。</li> <li>物理层: 当数据准备要从设备发送到⽹络时，需要把数据包转换成电信号，让其可以在物理介质中传输，这⼀层就是物理层，它主要是为数据链路层提供⼆进制传输的服</li></ol> <h2 id="linux的虚拟网络模型"><a href="#linux的虚拟网络模型" class="header-anchor">#</a> linux的虚拟网络模型</h2> <p>计算机网络中常用的虚拟网络模型包括了：host模型、bridge模型、NAT模型、overlay network模型。</p> <h2 id="http八种请求方法"><a href="#http八种请求方法" class="header-anchor">#</a> HTTP八种请求方法</h2> <ol><li><code>OPTIONS(options)</code>: 返回服务器针对特定资源所支持的HTTP请求方法，也可以利用向web服务器发送‘*’的请求来测试服务器的功能性。</li> <li><code>HEAD(head)</code>: 向服务器索与GET请求相一致的响应，只不过响应体将不会被返回。这一方法可以再不必传输整个响应内容的情况下，就可以获取包含在响应小消息头中的元信息。</li> <li><code>GET(get)</code>: 向特定的资源发出请求。注意: GET方法不应当被用于产生“副作用”的操作中，例如在Web Application中，其中一个原因是GET可能会被网络蜘蛛等随意访问。Loadrunner中对应get请求函数: web_link和web_url</li> <li><code>POST(post)</code>: 向指定资源提交数据进行处理请求（例如提交表单或者上传文件）。数据被包含在请求体中。POST请求可能会导致新的资源的建立和/或已有资源的修改。 Loadrunner中对应POST请求函数: web_submit_data,web_submit_form。</li> <li><code>PUT(put)</code>: 向指定资源位置上传其最新内容。</li> <li><code>DELETE(delete)</code>: 请求服务器删除Request-URL所标识的资源。</li> <li><code>TRACE(trace)</code>: 回显服务器收到的请求，主要用于测试或诊断。</li> <li><code>CONNECT(connect)</code>: HTTP/1.1协议中预留给能够将连接改为管道方式的代理服务器。</li></ol> <h2 id="session和cookie原理"><a href="#session和cookie原理" class="header-anchor">#</a> session和cookie原理</h2> <table><thead><tr><th style="text-align:center;"></th> <th style="text-align:center;">Session</th> <th style="text-align:center;">Cookie</th></tr></thead> <tbody><tr><td style="text-align:center;">原理</td> <td style="text-align:center;">会话状态保存在服务器端的技术</td> <td style="text-align:center;">Cookie是一种在浏览器的技术。Cookie是一种在浏览器的技术。</td></tr> <tr><td style="text-align:center;">存储的位置</td> <td style="text-align:center;">session 可以存储在Redis中、数据库中、应用程序中</td> <td style="text-align:center;">cookie存储在浏览器端</td></tr> <tr><td style="text-align:center;">安全性不同</td> <td style="text-align:center;">不安全</td> <td style="text-align:center;">不安全</td></tr> <tr><td style="text-align:center;">容量和个数限制</td> <td style="text-align:center;">没有的限制</td> <td style="text-align:center;">cookie 有容量限制，每个站点下的 cookie也有个数限制</td></tr></tbody></table> <p><strong>Session和Cookie的安全性都存在一定的问题。</strong></p> <ul><li>Session的安全性主要取决于Session lD的安全性，如果SessionlD被青测或者被盗取，
攻击者就可以访问用户的Session数据。为了提高Session的安全性，可以采用加密、哈希等方式对Session ID进行保护</li> <li>Cookie的安全性也存在一定的问题，
如果Cookie被窃取，攻击者就可以模拟用户的身份进行访问。为了提高Cookie的安全性，可以采用加密、签名等方式对Cookie进行保护。
此外，还可以设置Cookie的过期时间，避免Cookie长时间存在，增加被攻击的风险。</li></ul> <h2 id="cookie和session的区别"><a href="#cookie和session的区别" class="header-anchor">#</a> Cookie和Session的区别</h2> <p>当通过浏览器进行网页访问的时候，服务器可以把某一些状态数据以key-value的方式，写入到Cookie里面存储到客户端浏览器。
然后客户端下一次再访问服务器的时候，就可以携带这些状态数据发送到服务器端，服务端可以根据Cookie里面携带的内容来识别使用者。</p> <p>Session表示一个会话，它是属于服务器端的容器对象，默认情况下，针对每一个浏览器的请求。Servlet容器都会分配一个Session。
Session本质上是一个ConcurrentHashMap，可以存储当前会话产生的一些状态数据。Http协议本身是一个无状态协议，也就是服务器并不知道客户端发送过来的多次请求是属于同一个用户。
所以Session是用来弥补Http无状态的不足，简单来说，服务器端可以利用session来存储客户端在同一个会话里面的多次请求记录。</p> <p>户端第一次访问服务端的时候，服务端会针对这次请求创建一个会话，并生成一个唯一的sessionId来标注这个会话。
然后服务端把这个sessionid写入到客户端浏览器的cookie里面，用来实现客户端状态的保存。
在后续的请求里面，每次都会携带sessionid，服务器端就可以根据这个sessionid来识别当前的会话状态。</p> <p><img src="/zhuangxiaoyan/assets/img/Cookie-Session001.345bc989.png" alt="img.png"></p> <p>所以，总的来看，Cookie是客户端的存储机制，Session是服务端的存储机制。</p> <h2 id="get与post的区别"><a href="#get与post的区别" class="header-anchor">#</a> get与post的区别</h2> <p>GET是从服务器上获得数据；POST是向服务器传递数据</p> <ol><li>url可见性：get参数url可见；posturl参数不可见</li> <li>数据传输上：get通过拼接url进行传递参数；post通过body体传输参数</li> <li>缓存性：get请求是可以缓存的,post请求不可以缓存</li> <li>后退页面的反应：get请求页面后退时，不产生影响,post请求页面后退时，会重新提交请求</li> <li>传输数据的大小：get一般传输数据大小不超过2k-4k（根据浏览器不同，限制不一样，但相差不大）,post请求传输数据的大小根据php.ini 配置文件设定，也可以无限大。</li> <li>安全性：这个也是最不好分析的，原则上post肯定要比get安全，毕竟传输参数时url不可见，但也挡不住部分人闲的没事在那抓包玩。安全性个人觉得是没多大区别的，防君子不防小人就是这个道理。对传递的参数进行加密，其实都一样。</li> <li>数据包：GET产生一个TCP数据包；POST产生两个TCP数据包。对于GET方式的请求，浏览器会把http header和data一并发送出去，服务器响应200（返回数据）；而对于POST，浏览器先发送header，服务器响应100 continue，浏览器再发送data，
服务器响应200 ok（返回数据）。在网络环境好的情况下，发一次包的时间和发两次包的时间差别基本可以无视。而在网络环境差的情况下，两次包的TCP在验证数据包完整性上，有非常大的优点。并不是所有浏览器都会在POST中发送两次包
Firefox就只发送一次。</li></ol> <p><strong>什么大型网站都采用get方法，而非post方法</strong></p> <ol><li>get 是从服务器上获取数据，post 是向服务器传送数据。get和post 只是一种传递数据的方式，
get 也可以把数据传到服务器，他们的本质都是发送请求和接收结果。只是组织格式和数据量上面有差别。</li> <li>get是把参数数据队列加到提交表单的 ACTION 属性所指的 URL 中，值和表单内各个字段一一对应，在URL中可以看到。
post 是通过 HTTPpost 机制，将表单内各个字段与其内容放置在HTML HEADER 内一起传送到 ACTION 属性所指的 URL 地址。
用户看不到这个过程。因为get设计成传输小数据，而且最好是不修改服务器的数据，所以浏览器一般都在地址栏里面可以看到，
但post一般都用来传递大数据，或比较隐私的数据，所以在地址栏看不到，能不能看到不是协议规定，是浏览器规定的。</li> <li>对于get方式，服务器端用 Request.QueryString获取变量的值，对于post方式，服务器端用 Request.Form 获取提交的数据。
没明白，怎么获得变量和你的服务器有关，和get或post无关，服务器都对这些请求做了封装</li> <li>get传送的数据量较小，不能大于2KB。post传送的数据量较大，一般被默认为不受限制。
但理论上，IIS4 中最大量为 80KB，IIS5 中为 100KB。post 基本没有限制，我想大家都上传过文件，
都是用 post 方式的。只不过要修改 form 里面的那个 type 参数</li> <li>get安全性非常低，post 安全性较高。如果没有加密，他们安全级别都是一样的，随便一个监听器都可以把所有的数据监听到，不信你自己下一个监听网络资源的软件</li></ol> <h2 id="http三次握手原理"><a href="#http三次握手原理" class="header-anchor">#</a> HTTP三次握手原理</h2> <img src="/zhuangxiaoyan/interview/network03.png" alt="network03"> <p>三次握手流程:</p> <ol><li>第一次握手: 建立连接时，客户端发送syn包（syn=x）到服务器，并进入SYN_SENT状态，等待服务器确认；SYN: 同步序列编号（Synchronize Sequence Numbers）。</li> <li>第二次握手: 服务器收到syn包，必须确认客户的SYN（ack=x+1），同时自己也发送一个SYN包（syn=y），即SYN+ACK包，此时服务器进入SYN_RECV状态；</li> <li>第三次握手: 客户端收到服务器的SYN+ACK包，向服务器发送确认包ACK(ack=y+1），此包发送完毕，客户端和服务器进入ESTABLISHED（TCP连接成功）状态，完成三次握手。</li></ol> <h2 id="为什么是三次握手-不是两次、四次"><a href="#为什么是三次握手-不是两次、四次" class="header-anchor">#</a> 为什么是三次握手？不是两次、四次？</h2> <ol><li>三次握手才可以阻止重复历史连接的初始化（主要原因）</li> <li>三次握手才可以同步双方的初始序列号</li> <li>三次握⼿才可以避免资源浪费</li></ol> <h2 id="三次握手过程中是否可以携带数据"><a href="#三次握手过程中是否可以携带数据" class="header-anchor">#</a> 三次握手过程中是否可以携带数据</h2> <p><strong>第三次握手时是可以携带数据的，但第一二次握手时不可以携带数据</strong>。</p> <ol><li><p>假如第一次握手可以携带数据的话，那么会放大 SYN 洪泛。如果有人要恶意攻击服务器，
每次都在第一次握手中的 SYN 报文中放入大量的数据，然后疯狂重复发送 SYN 报文的话，
就会让服务器开辟大量的缓存来接收这些报文，内存会很容易耗尽，从而拒绝服务。</p></li> <li><p>第三次握手时客户端已经处于 ESTABLISHED 状态，对于客户端来说，他已经建立起连接了，
并且已经知道服务器的接收和发送能力是正常的，所以也就可以携带数据了。</p></li></ol> <h2 id="三次握手是如何避免重复历史连接的初始化"><a href="#三次握手是如何避免重复历史连接的初始化" class="header-anchor">#</a> 三次握⼿是如何避免重复历史连接的初始化？</h2> <p>⽹络环境是错综复杂的，往往并不是如我们期望的⼀样，先发送的数据包，就先到达⽬标主机，可能会由于⽹络拥堵等乱七⼋糟的原因，会使得旧的数据包，先到达⽬标主机。
客户端连续发送多次 SYN 建⽴连接的报⽂，在网络拥堵情况下:</p> <ul><li>⼀个旧 SYN 报⽂⽐最新的 SYN  报⽂早到达了服务端；</li> <li>那么此时服务端就会回⼀个 SYN + ACK 报⽂给客户端；</li> <li>客户端收到后可以根据⾃身的上下⽂，判断这是⼀个历史连接（序列号过期或超时），那么客户端就会发送 RST 报⽂给服务端，表示中止这⼀次连接。</li> <li>如果是两次握⼿连接，就不能判断当前连接是否是历史连接，三次握⼿则可以在客户端（发送⽅）准备发送第三次报⽂时，客户端因有⾜够的上下⽂来判断当前连接是否是历史连接:</li> <li>如果是历史连接（序列号过期或超时），则第三次握⼿发送的报⽂是 RST 报⽂，以此中⽌历史连接；</li> <li>如果不是历史连接，则第三次发送的报⽂是 ACK 报⽂，通信双⽅就会成功建⽴连接； 所以，TCP使⽤三次握⼿建⽴连接的最主要原因是防⽌历史连接初始化了连接。</li></ul> <h2 id="三次握手才如何同步双方序列号"><a href="#三次握手才如何同步双方序列号" class="header-anchor">#</a> 三次握手才如何同步双方序列号</h2> <p>TCP 协议的通信双⽅， 都必须维护⼀个序列号， <strong>序列号是可靠传输的⼀个关键因素</strong>，它的作⽤:</p> <ol><li>接收⽅可以去除重复的数据。</li> <li>接收⽅可以根据数据包的序列号按序接收。</li> <li>可以标识发送出去的数据包中， 哪些是已经被对⽅收到的。</li></ol> <p>序列号在TCP连接中占据着常重要的作⽤，所以当客户端发送携带初始序列号的 SYN 报⽂的时 候，需要服务端回⼀个 ACK 应答报⽂，
表示客户端的 SYN 报⽂已被服务端成功接收，那当服务端发送初始序 列号给客户端的时候，依然也要得到客户端的应答回应，这样⼀来⼀回，
才能确保双⽅的初始序列号能被可靠的同步。</p> <h2 id="三次握手才怎样避免资源浪费"><a href="#三次握手才怎样避免资源浪费" class="header-anchor">#</a> 三次握⼿才怎样避免资源浪费？</h2> <p>如果只有两次握⼿，当客户端的 SYN 请求连接在⽹络中阻塞，客户端没有接收到 ACK 报⽂，就会重新发送SYN ，
由于没有第三次握⼿，服务器不清楚客户端是否收到了⾃⼰发送的建⽴连接的 ACK 确认信号，所以每收到⼀个 SYN就只能先主动建⽴⼀个连接，
这会造成什么情况呢？ 如果客户端的 SYN 阻塞了，重复发送多次 SYN 报⽂，那么服务器在收到请求后就会建⽴多个冗余的无效的连接，造成不必要的资源浪费。</p> <h2 id="http四次挥手原理"><a href="#http四次挥手原理" class="header-anchor">#</a> HTTP四次挥手原理</h2> <img src="/zhuangxiaoyan/interview/network04.png" alt="network04"> <p>四次挥手的流程:</p> <ol><li>客户端进程发出连接释放报文，并且停止发送数据。释放数据报文首部，FIN=1，其序列号为seq=u（等于前面已经传送过来的数据的最后一个字节的序号加1），此时，客户端进入FIN-WAIT-1（终止等待1）状态。 TCP规定，FIN报文段即使不携带数据，也要消耗一个序号。</li> <li>服务器收到连接释放报文，发出确认报文，ACK=1，ack=u+1，并且带上自己的序列号seq=v，此时，服务端就进入了CLOSE-WAIT（关闭等待）状态。TCP服务器通知高层的应用进程，客户端向服务器的方向就释放了，这时候处于半关闭状态，即客户端已经没有数据要发送了，但是服务器若发送数据，客户端依然要接受。这个状态还要持续一段时间，也就是整个CLOSE-WAIT状态持续的时间。</li> <li>客户端收到服务器的确认请求后，此时，客户端就进入FIN-WAIT-2（终止等待2）状态，等待服务器发送连接释放报文（在这之前还需要接受服务器发送的最后的数据）。</li> <li>服务器将最后的数据发送完毕后，就向客户端发送连接释放报文，FIN=1，ack=u+1，由于在半关闭状态，服务器很可能又发送了一些数据，假定此时的序列号为seq=w，此时，服务器就进入了LAST-ACK（最后确认）状态，等待客户端的确认。</li> <li>客户端收到服务器的连接释放报文后，必须发出确认，ACK=1，ack=w+1，而自己的序列号是seq=u+1，此时，客户端就进入了TIME-WAIT（时间等待）状态。注意此时TCP连接还没有释放，必须经过2∗∗MSL（最长报文段寿命）的时间后，当客户端撤销相应的TCB后，才进入CLOSED状态。</li> <li>服务器只要收到了客户端发出的确认，立即进入CLOSED状态。同样，撤销TCB后，就结束了这次的TCP连接。可以看到，服务器结束TCP连接的时间要比客户端早一些。</li></ol> <h2 id="为什么需要四次挥手"><a href="#为什么需要四次挥手" class="header-anchor">#</a> 为什么需要四次挥⼿？</h2> <p>TCP是全双工模式，并且支持半关闭特性，提供了连接的一端在结束发送后还能接收来自另一端数据的能力。
任何一方都可以在数据传送结束后发出连接释放的通知，待对方确认后进入半关闭状态。当另一方也没有数据再发送的时候，
则发出连接释放通知，对方确认后就完全关闭了TCP连接。</p> <h2 id="time-wait等待的时间是2msl"><a href="#time-wait等待的时间是2msl" class="header-anchor">#</a> TIME_WAIT等待的时间是2MSL？</h2> <p>网络中可能存在来⾃发送⽅的数据包，当这些发送⽅的数据包 被接收⽅处理后⼜会向对⽅发送响应，所以⼀来⼀回需要等待2倍的时间。
如果被动关闭⽅没有收到断开连接的最后的ACK 报⽂，就会触发超时重发Fin报⽂，另⼀⽅接收到FIN后，会重发ACK给被动关闭⽅，⼀来⼀去正好2个MSL。</p> <p>在Linux 系统⾥ 2MSL 默认是 60 秒，那么⼀个 MSL 也就是 30 秒。Linux 系统停留在 TIME_WAIT 的时 间为固定的 60 秒。
其定义在 Linux 内核代码⾥的名称为<code>TCP_TIMEWAIT_LEN:define TCP_TIMEWAIT_LEN (60*HZ)</code>，
如果要修改 TIME_WAIT 的时间⻓度，只能修改 Linux 内核代码⾥ TCP_TIMEWAIT_LEN 的值，并重新编译Linux内核 。</p> <h2 id="msl与ttl的区别"><a href="#msl与ttl的区别" class="header-anchor">#</a> MSL与TTL的区别</h2> <p>MSL 的单位是时间，⽽TTL 是经过路由跳数。</p> <ol><li>MSL是Maximum Segment Lifetime，报⽂最⼤⽣存时间，它是任何报⽂在网络上存在的最⻓时间，超过这个时间报⽂将被丢弃。</li> <li>TTL 字段: ⽽IP 头中有⼀个TTL字段，是IP数据报可以经过的最大路由数，每经过⼀个处理他的路由器此值就减 1，当此值为0则数据报将被丢弃，同时发送ICMP 报⽂通知源主机 。</li></ol> <h2 id="为什么需要time-wait状态"><a href="#为什么需要time-wait状态" class="header-anchor">#</a> 为什么需要TIME_WAIT状态？</h2> <p>主动发起关闭连接的⼀⽅，才会有TIME-WAI状态。 需要TIME-WAIT状态，主要是两个原因:</p> <ol><li>保证让迟来的TCP报文段有足够的时间被识别和丢弃。连接结束了，网络中的延迟报文也应该被丢弃掉，以免影响立刻建立的新连接。</li> <li>可靠终止TCP连接。如果最后一个ACK报文因为网络原因被丢弃，此时server因为没有收到ACK而超时重传FIN报文，处于TIME_WAIT状态的client可以继续对FIN报文做回复，向server发送ACK报文。</li></ol> <h2 id="time-wait过长有什么危害"><a href="#time-wait过长有什么危害" class="header-anchor">#</a> TIME_WAIT过长有什么危害</h2> <p>如果服务器有处于 TIME-WAIT 状态的TCP，则说明是由服务器⽅主动发起的断开请求。 过多的 TIME-WAIT 状态主要的危害有两种:</p> <ol><li>第⼀是内存资源占⽤；</li> <li>第⼆是对端⼝资源的占⽤，⼀个 TCP 连接⾄少消耗⼀个本地端⼝。</li></ol> <p><strong>如何优化 TIME_WAIT？</strong></p> <ol><li>打开 net.ipv4.tcp_tw_reuse 和 net.ipv4.tcp_timestamps 选项；<br>
如下的 Linux 内核参数开启后，则可以复⽤处于 TIME_WAIT 的 socket 为新的连接所⽤。 有⼀点需要注意的是，tcp_tw_reuse 功能只能⽤客户端（连接发起⽅），因为开启了该功能，在调⽤ connect() 函数时，内核会随机找⼀个 time_wait 状态超过 1 秒的连接给新的连接复⽤。</li> <li>net.ipv4.tcp_max_tw_buckets。
这个值默认为 18000，当系统中处于 TIME_WAIT 的连接⼀旦超过这个值时，系统就会将后⾯的 TIME_WAIT 连接 状态重置 。 这个⽅法过于暴⼒，⽽且治标不治本，带来的问题远⽐解决的问题多，不推荐使⽤</li> <li>程序中使⽤ SO_LINGER ，应⽤强制使⽤ RST 关闭<br>
我们可以通过设置 socket 选项，来设置调⽤ close 关闭连接⾏为，我们可以通过设置 socket 选项，来设置调⽤ close 关闭连接⾏为 。</li></ol> <p><strong>如果已经建立了连接，但是客户端突然出现故障了怎么办？</strong></p> <p>TCP 有⼀个机制是保活机制。这个机制的原理是这样的:   定义⼀个时间段，在这个时间段内，如果没有任何连接相关的活动，TCP 保活机制会开始作⽤，
每隔⼀个时间间 隔，发送⼀个探测报⽂，该探测报文包含的数据⾮常少，如果连续几个探测报⽂都没有得到响应，
则认为当前的 TCP 连接已经死亡，系统内核将错误信息通知给上层应⽤程序 :</p> <div class="language-shell extra-class"><pre class="language-shell"><code>在 Linux 内核可以有对应的参数可以设置保活时间、保活探测的次数、保活探测的时间间隔，以下都为默认值: 
<span class="token assign-left variable">tcp_keepalive_time</span><span class="token operator">=</span><span class="token number">7200</span>: 
表示保活时间是7200秒（2⼩时），也就2⼩时内如果没有任何连接相关的活动，则会启动保活机制
<span class="token assign-left variable">tcp_keepalive_intvl</span><span class="token operator">=</span><span class="token number">75</span>: 
表示每次检测间隔75秒；
<span class="token assign-left variable">tcp_keepalive_probes</span><span class="token operator">=</span><span class="token number">9</span>: 
表示检测9次⽆响应，认为对⽅是不可达的，从⽽中断本次的连接。
</code></pre></div><p>如果开启了 TCP 保活，需要考虑以下⼏种情况:</p> <ol><li>第⼀种，对端程序是正常⼯作的。当 TCP 保活的探测报⽂发送给对端, 对端会正常响应，这样 TCP 保活时间会被 重置，等待下⼀个 TCP 保活时间的到来。</li> <li>第⼆种，对端程序崩溃重启。当 TCP 保活的探测报⽂发送给对端后，对端是可以响应的，但由于没有该连接的 有效信息，会产⽣⼀个 RST 报⽂，这样很快就会发现 TCP 连接已经被重置。</li> <li>第三种，是对端程序崩溃，或对端由于其他原因导致报⽂不可达。当 TCP 保活的探测报⽂发送给对端后，⽯沉⼤ 海，没有响应，连续⼏次，达到保活探测次数后，TCP 会报告该 TCP 连接已经死亡。</li></ol> <h2 id="http状态码有那些"><a href="#http状态码有那些" class="header-anchor">#</a> HTTP状态码有那些</h2> <p><strong>1xx类状态码</strong></p> <p>属于提示信息，是协议处理中的⼀种中间状态，实际⽤到的⽐较少。</p> <p><strong>2xx 类状态码</strong></p> <p>表示服务器成功处理了客户端的请求，也是我们最愿意看到的状态。</p> <ol><li>200 OK是最常⻅的成功状态码，表示⼀切正常。如果是⾮ HEAD 请求，服务器返回的响应头都会有 body 数据。</li> <li>204 No Content也是常⻅的成功状态码，与200OK基本相同，但响应头没有body 数据。</li> <li>206 Partial Content是应⽤于 HTTP 分块下载或断点续传，表示响应返回的body数据并不是资源的全部，⽽是其中的⼀部分，也是服务器处理成功的状态。</li></ol> <p><strong>3xx 类状态码</strong></p> <p>表示客户端请求的资源发送了变动，需要客户端⽤新的 URL 新发送请求获取资源，也就是重定向。</p> <ol><li>301 Moved Permanently表示永久定向，说明请求的资源已经不存在了，需改⽤新的 URL 再次访问。</li> <li>302 Found表示临时定向，说明请求的资源还在，但暂时需要⽤另⼀个 URL 来访问。</li> <li>301和30 都会在响应头⾥使⽤字段Location，指明后续要跳转的URL，浏览器会⾃动指定定向新的URL。</li> <li>304 Not Modified不具有跳转的含义，表示资源未修改，定向已存在的缓冲⽂件，也称缓存定向，⽤于缓存控制。</li></ol> <p><strong>4xx 类状态码</strong></p> <p>表示客户端发送的报⽂有误，服务器⽆法处理，也就是错误码的含义。</p> <ol><li>400 Bad Request表示客户端请求的报⽂有错误，但只是个笼统的错误。</li> <li>403 Forbidden表示服务器禁⽌访问资源，并不是客户端的请求出错。</li> <li>404 Not Found表示请求的资源在服务器上不存在或未找到，所以⽆法提供给客户端。</li></ol> <p><strong>5xx 类状态码</strong></p> <p>表示客户端请求报⽂正确，但是服务器处理时内部发⽣了错误，属于服务器端的错误码。</p> <ol><li>500 Internal Server Error与400类型，是个笼统通⽤的错误码，服务器发⽣了什么错误，我们并不知道。</li> <li>501 Not Implemented表示客户端请求的功能还不⽀持，类似“即将开业，敬请期待”的意思。</li> <li>502 Bad Gateway通常是服务器作为⽹关或代理时返回的错误码，表示服务器⾃身⼯作正常，访问后端服务器发⽣了错误。</li> <li>503 Service Unavailable表示服务器当前很忙，暂时⽆法响应服务器，类似“⽹络服务正忙，请稍后在试”的意思</li> <li>504 GetWay timeout表示网关超时</li> <li>505 HTTP version not support表示的HTTP协议不支持。</li></ol> <h2 id="http1-0优点"><a href="#http1-0优点" class="header-anchor">#</a> HTTP1.0优点</h2> <ol><li>简单HTTP基本的报⽂格式就是 header + body ，头部信息也是 key-value 简单⽂本的形式，易于理解，降低了学习 和使⽤的⻔槛。</li> <li>灵活和易于扩展 HTTP协议⾥的各类请求⽅法、URI/URL、状态码、头字段等每个组成要求都没有被固定死，都允许开发⼈员⾃定 义和扩充。</li> <li>应⽤⼴泛和跨平台 互联⽹发展⾄今，HTTP 的应⽤范围⾮常的⼴泛。</li></ol> <h2 id="http1-0缺点"><a href="#http1-0缺点" class="header-anchor">#</a> HTTP1.0缺点</h2> <p>HTTP 协议⾥有优缺点⼀体的双刃剑，分别是⽆状态、明⽂传输，同时还有⼀⼤缺点不安全。</p> <ol><li>⽆状态的坏处，既然服务器没有记忆能⼒，它在完成有关联性的操作时会⾮常麻烦。</li> <li>不安全 HTTP 比较严重的缺点就是不安全:通信使用明文（不加密），内容可能会被窃听。</li></ol> <h2 id="http-1-1性能改进"><a href="#http-1-1性能改进" class="header-anchor">#</a> HTTP/1.1性能改进</h2> <ol><li>使⽤TCP⻓连接的⽅式改善了 HTTP/1.0短连接造成的性能开销。</li> <li>⽀持管道⽹络传输，只要第⼀个请求发出去了，不必等其回来，就可以发第⼆个请求出去，可以减少整体的响应时间。</li></ol> <h2 id="http-1-1性能瓶颈"><a href="#http-1-1性能瓶颈" class="header-anchor">#</a> HTTP/1.1性能瓶颈</h2> <ol><li>请求/响应头部(Header)未经压缩就发送，⾸部信息越多延迟越⼤。只能压缩Body的部分。</li> <li>发送冗⻓的⾸部。每次互相发送相同的⾸部造成的浪费较多。</li> <li>服务器是按请求的顺序响应的，如果服务器响应慢，会招致客户端⼀直请求不到数据，也就是队头阻塞； 没有请求优先级控制。</li> <li>请求只能从客户端开始，服务器只能被动响应。</li></ol> <h2 id="http2-0特性"><a href="#http2-0特性" class="header-anchor">#</a> HTTP2.0特性</h2> <ol><li>采用<strong>头部压缩</strong>技术，http2.0压缩请求头中重复的部分。</li> <li>头信息和数据体采用<strong>二进制格式</strong>，http1.1采用的纯⽂本形式的报⽂。</li> <li>采用<strong>多路复用技术</strong>，利用连接的socket的数量，同时减少队头阻塞。</li> <li><strong>服务器推送技术</strong>，服务不再是被动地响应，也可以主动向客户端发 送消息</li> <li><strong>数据流技术</strong>，指定数据流的优先级。优先级⾼的请求，服务器就先响应该请求。</li></ol> <h2 id="keepalive-timer的作用"><a href="#keepalive-timer的作用" class="header-anchor">#</a> keepalive timer的作用</h2> <p>服务器每收到一次客户的数据，就重新设置保活计时器，时间的设置通常是两个小时。若两个小时都没有收到客户端的数据，
服务端就发送一个探测报文段，以后则每隔 75秒钟发送一次。若连续发送10个探测报文段后仍然无客户端的响应，
服务端就认为客户端出了故障，接着就关闭这个连接。</p> <h2 id="http1-0-http1-1和http2-0的区别"><a href="#http1-0-http1-1和http2-0的区别" class="header-anchor">#</a> Http1.0,Http1.1和Http2.0的区别</h2> <ol><li>Http1.0短连接（100张图，100次tcp握手和挥手)</li> <li>Http1.1长连接(100张图,1次tcp握手挥手)</li> <li>Http2.0长连接+io多路复用模型(五大模型之一)</li></ol> <h2 id="http的优化的方式"><a href="#http的优化的方式" class="header-anchor">#</a> HTTP的优化的方式</h2> <ol><li>开启HTTP的缓存字段，尽避免发送HTTP重复请求。</li> <li>多个小请求合并成⼀个大的请求，减少HTTP请求的次数。</li> <li>延迟发送请求，根据按需获取资源减少HTTP请求次数</li> <li>采用压缩技术减少 HTTP 响应的数据⼤⼩。</li></ol> <h2 id="https连接传输过程"><a href="#https连接传输过程" class="header-anchor">#</a> HTTPS连接传输过程</h2> <img src="/zhuangxiaoyan/interview/HTTPS.png" alt="HTTPS"> <ol><li>Client发起一个HTTPS的请求，根据RFC2818的规定，Client知道需要连接Server的443（默认）端口。</li> <li>Server把事先配置好的公钥证书（public key certificate）返回给客户端。</li> <li>Client验证公钥证书：比如是否在有效期内，证书的用途是不是匹配Client请求的站点，是不是在CRL吊销列表里面，它的上一级证书是否有效，这是一个递归的过程，直到验证到根证书（操作系统内置的Root证书或者Client内置的Root证书）。如果验证通过则继续，不通过则显示警告信息。</li> <li>Client使用伪随机数生成器生成加密所使用的对称密钥，然后用证书的公钥加密这个对称密钥，发给Server。</li> <li>Server使用自己的私钥（private key）解密这个消息，得到对称密钥。至此，Client和Server双方都持有了相同的对称密钥。</li> <li>Server使用对称密钥加密“明文内容A”，发送给Client。</li> <li>Client使用对称密钥解密响应的密文，得到“明文内容A”。</li> <li>Client再次发起HTTPS的请求，使用对称密钥加密请求的“明文内容B”，然后Server使用对称密钥解密密文，得到“明文内容B”。</li></ol> <h2 id="http与https有哪些区别"><a href="#http与https有哪些区别" class="header-anchor">#</a> HTTP与HTTPS有哪些区别</h2> <ol><li>HTTP 是超⽂本传输协议，信息是明⽂传输，存在安全⻛险的问题。HTTPS则解决HTTP不安全的缺陷，在 TCP 和 HTTP ⽹络层之间加⼊了 SSL/TLS 安全协议，使得报⽂能够加密传输。</li> <li>HTTP 连接建⽴相对简单，TCP 三次握⼿之后便可进⾏ HTTP 的报⽂传输。⽽ HTTPS 在 TCP 三次握⼿之 后，还需进⾏ SSL/TLS 的握⼿过程，才可进⼊加密报⽂传输。</li> <li>HTTP 的端⼝号是 80，HTTPS 的端⼝号是 443。</li> <li>HTTPS 协议需要向 CA（证书权威机构）申请数字证书，来保证服务器的身份是可信的</li></ol> <h2 id="https解决了http的安全问题"><a href="#https解决了http的安全问题" class="header-anchor">#</a> HTTPS解决了HTTP的安全问题</h2> <ol><li>信息加密：交互信息⽆法被窃取，但你的号会因为⾃身忘记账号⽽没。</li> <li>校验机制：⽆法篡改通信内容，篡改了就不能正常显示，但百度竞价排名依然可以搜索垃圾⼴告。</li> <li>身份证书：证明淘宝是真的淘宝⽹，但你的钱还是会因为剁⼿⽽没。 可⻅，只要⾃身不做恶，SSL/TLS 协议是能保证通信是安全的。</li></ol> <h2 id="https的优化方式"><a href="#https的优化方式" class="header-anchor">#</a> HTTPS的优化方式</h2> <ol><li>对于硬件优化的⽅向</li></ol> <p>因为 HTTPS 是属于计算密集型，应该选择计算⼒更强的 CPU，⽽且最好选择⽀持 AES-NI 特性的 CPU，
这个特性可以在硬件级别优化 AES 对称加密算法，加快应⽤数据的加解密。</p> <ol start="2"><li>对于软件优化的⽅向</li></ol> <p>如果可以，把软件升级成较新的版本，⽐如将 Linux 内核 2.X 升级成 4.X，将 openssl 1.0.1 升级到 1.1.1，
因为新版本的软件不仅会提供新的特性，⽽且还会修复⽼版本的问题。</p> <ol start="3"><li>对于协议优化的⽅</li></ol> <p>密钥交换算法应该选择 ECDHE 算法，⽽不⽤ RSA 算法，因为 ECDHE 算法具备前向安全性，⽽且客户端可 以在第三次握⼿之后，就发送加密应⽤数据，节省了 1 RTT。
将 TSL1.2 升级 TSL1.3，因为 TSL1.3 的握⼿过程只需要 1 RTT，⽽且安全性更强。</p> <ol start="4"><li>对于证书优化的⽅向</li></ol> <p>服务器应该选⽤ ECDSA 证书，⽽⾮ RSA 证书，因为在相同安全级别下，ECC 的密钥⻓度⽐ RSA 短很多， 这样可以提⾼证书传输的效率；
服务器应该开启 OCSP Stapling 功能，由服务器预先获得 OCSP 的响应，并把响应结果缓存起来，
这样 TLS 握⼿的时候就不⽤再访问 CA 服务器，减少了⽹络通信的开销，提⾼了证书验证的效率；</p> <ol start="5"><li>对于重连HTTPS时</li></ol> <p>我们可以使⽤⼀些技术让客户端和服务端使⽤上⼀次 HTTPS 连接使⽤的会话密钥，直接恢 复会话，⽽不⽤再重新⾛完整的 TLS 握⼿过程。
常⻅的会话重⽤技术有 Session ID 和 Session Ticket，⽤了会话重⽤技术，当再次重新连 HTTPS 时，只需要 1 RTT 就可以恢复会话。
对于 TLS1.3 使⽤ Pre-shared Key 会话重⽤技术，只需要 0 RTT 就可以恢复会话。这些会话重⽤技术虽然好⽤，
但是存在⼀定的安全⻛险，它们不仅不具备前向安全，⽽且有重放攻击的⻛险，所以 应当对会话密钥设定⼀个合理的过期时间。</p> <h2 id="arq协议"><a href="#arq协议" class="header-anchor">#</a> ARQ协议</h2> <ol><li><p><strong>自动重传请求ARQ协议</strong>：停止等待协议中超时重传是指只要超过一段时间仍然没有收到确认，
就重传前面发送过的分组(认为刚才发送过的分组丢失了)。因此每发送完一个分组需要设置一个超时计时器，
其重传时间应比数据在分组传输的平均往返时间更长一些。这种自动重传方式常称为自动重传请求ARQ。</p></li> <li><p><strong>连续ARQ协议</strong>：连续 ARQ 协议可提高信道利用率。发送方维持一个发送窗口，凡位于发送窗口内的分组可以连续发送出去，
而不需要等待对方确认。接收方一般采用累计确认，对按序到达的最后一个分组发送确认，
表明到这个分组为止的所有分组都已经正确收到了。</p></li></ol> <h2 id="arp协议"><a href="#arp协议" class="header-anchor">#</a> ARP协议</h2> <p>即地址解析协议， 用于实现从 IP 地址到 MAC 地址的映射，即询问目标IP对应的MAC地址。</p> <h2 id="rarp协议"><a href="#rarp协议" class="header-anchor">#</a> RARP协议</h2> <p>逆地址解析协议。允许局域网的物理机器从网关服务器的ARP表或缓存上请求IP地址。</p> <h2 id="icmp协议的功能"><a href="#icmp协议的功能" class="header-anchor">#</a> ICMP协议的功能</h2> <p>CMP协议是一种<strong>面向无连接的协议，用于传输出错报告控制信息</strong>。它是一个非常重要的协议，它对于网络安全具有极其重要的意义。
<strong>它属于网络层协议</strong>，主要用于在主机与路由器之间传递控制信息，包括报告错误、交换受限控制和状态信息等。
当遇到IP数据无法访问目标、IP路由器无法按当前的传输速率转发数据包等情况时，会自动发送ICMP消息。
比如我们日常使用得比较多的ping，就是基于ICMP的。</p> <h2 id="quic协议原理"><a href="#quic协议原理" class="header-anchor">#</a> QUIC协议原理</h2> <h2 id="quic协议的优点"><a href="#quic协议的优点" class="header-anchor">#</a> QUIC协议的优点</h2> <h2 id="http-3的特点"><a href="#http-3的特点" class="header-anchor">#</a> HTTP/3的特点</h2> <h2 id="重传机制的方式"><a href="#重传机制的方式" class="header-anchor">#</a> 重传机制的方式</h2> <p>TCP 实现可靠传输的⽅式之⼀，是通过序列号与确认应答。在TCP中，当发送端的数据到达接收主机时，
接收端主机会返回⼀个确认应答消息，表示已收到消息。但在错综复杂的⽹络，并不⼀定能顺利能正常的数据传输，
万⼀数据在传输过程中丢失了呢？ 所以TCP针对数据包丢失的情况，会⽤重传机制解决。</p> <ol><li>超时重传</li></ol> <p>重传机制的其中⼀个⽅式，就是在发送数据时，设定⼀个定时器，当超过指定的时间后，
没有收到对⽅的 ACK 确认应答报⽂，就会重发该数据，也就是我们常说的超时重传。
TCP 会在以下两种情况发⽣超时重传：</p> <ul><li>数据包丢失</li> <li>确认应答丢失</li></ul> <ol start="2"><li>快速重传</li></ol> <p>TCP 还有另外⼀种快速重传（Fast Retransmit）机制，它不以时间为驱动，⽽是以数据驱动重传。
所以，快速重传的⼯作⽅式是当收到三个相同的ACK 报⽂时，会在定时器过期之前，重传丢失的报⽂段。</p> <ol start="3"><li>SACK重传</li></ol> <p>TCP 头部选项字段⾥加⼀个 SACK 的东⻄，它可以将缓存的地图发送给发送⽅，这样发送 ⽅就可以知道哪些数据收到了，
哪些数据没收到，知道了这些信息，就可以只重传丢失的数据。</p> <ol start="4"><li>D-SACK重传</li></ol> <p>Duplicate SACK ⼜称 D-SACK ，其主要使⽤了SACK来告诉发送⽅有哪些数据被重复接收了。</p> <h2 id="滑动窗口原理"><a href="#滑动窗口原理" class="header-anchor">#</a> 滑动窗口原理</h2> <p>TCP 利用滑动窗口实现流量控制的机制。滑动窗口（Sliding window）是一种流量控制技术。早期的网络通信中，
通信双方不会考虑网络的拥挤情况直接发送数据。由于大家不知道网络拥塞状况，同时发送数据，导致中间节点阻塞掉包，
谁也发不了数据，所以就有了滑动窗口机制来解决此问题。</p> <p>TCP 中采用滑动窗口来进行传输控制，滑动窗口的大小意味着接收方还有多大的缓冲区可以用于接收数据。
发送方可以通过滑动窗口的大小来确定应该发送多少字节的数据。当滑动窗口为0时，发送方一般不能再发送数据报，</p> <p>但有两种情况除外:</p> <ol><li>一种情况是可以发送紧急数据，例如，允许用户终止在远端机上的运行进程。</li> <li>另一种情况是发送方可以发送一个 1 字节的数据报来通知接收方重新声明它希望接收的下一字节及发送方的滑动窗口大小。</li></ol> <h2 id="拥塞控制"><a href="#拥塞控制" class="header-anchor">#</a> 拥塞控制</h2> <p>在⽹络出现拥堵时，如果继续发送⼤量数据包，可能会导致数据包时延、丢失等，这时TCP就会重传数据，但是 ⼀重传就会导致⽹络的负担更重，
于是会导致更⼤的延迟以及更多的丢包，这个情况就会进⼊恶性循环被不断地放⼤，所以，TCP不能忽略⽹络上发⽣的事，
它被设计成⼀个⽆私的协议，<strong>当⽹络发送拥塞时，TCP会⾃我牺牲，降低发送的数据量</strong>。于是，就有了拥塞控制，
控制的⽬的就是<strong>避免发送⽅的数据填满整个⽹络</strong>。为了在发送⽅调节所要发送数据的量，定义了⼀个叫做拥塞窗⼝的概念。</p> <p><strong>拥塞窗口</strong>：cwnd是发送⽅维护的⼀个的状态变量，它会根据⽹络的拥塞程度动态变化的。
发送窗⼝swnd和接收窗⼝rwnd是约等于的关系，那么由于加⼊了拥塞窗⼝的概念后，
此时发送窗⼝的值是swnd=min(cwnd, rwnd)，也就是拥塞窗⼝和接收窗⼝中的最⼩值。
拥塞窗⼝cwnd变化的规则：</p> <ol><li>只要⽹络中没有出现拥塞，cwnd就会增⼤；</li> <li>但⽹络中出现了拥塞，cwnd就减少；</li></ol> <p><strong>怎么判断出现了拥塞呢</strong> 其实只要发送⽅没有在规定时间内接收到ACK应答报⽂，也就是发⽣了超时重传，就会认为⽹络出现了拥塞。</p> <h2 id="拥塞控制算法"><a href="#拥塞控制算法" class="header-anchor">#</a> 拥塞控制算法</h2> <ol><li>慢启动
<ul><li>有⼀个叫慢启动⻔限ssthresh（slow start threshold）状态变量。当 cwnd &lt; ssthresh 时，使⽤慢启动算法。</li></ul></li> <li>拥塞避免
<ul><li>当 cwnd &gt;= ssthresh 时，就会使⽤拥塞避免算法。它的规则是：每当收到⼀个 ACK 时，cwnd增加1/cwnd</li></ul></li> <li>拥塞发⽣
<ul><li>当⽹络出现拥塞，也就是会发⽣数据包重传，重传机制主要有两种：超时重传、快速重传</li></ul></li> <li>快速恢复
<ul><li>快速重传和快速恢复算法⼀般同时使⽤，快速恢复算法是认为，你还能收到 3 个重复ACK 说明⽹络也不那么糟 糕，所以没有必要像 RTO 超时那么强烈。</li></ul></li></ol> <h2 id="tcp和udp区别"><a href="#tcp和udp区别" class="header-anchor">#</a> TCP和UDP区别：</h2> <ol><li>连接 TCP是⾯向连接的传输层协议，传输数据前先要建⽴连接。 UDP 是不需要连接，即刻传输数据。</li> <li>服务对象 TCP 是⼀对⼀的两点服务，即⼀条连接只有两个端点。 UDP ⽀持⼀对⼀、⼀对多、多对多的交互通信</li> <li>可靠性 TCP 是可靠交付数据的，数据可以⽆差错、不丢失、不重复、按需到达。 UDP 是尽最⼤努⼒交付，不保证可靠交付数据。</li> <li>拥塞控制、流量控制 TCP 有拥塞控制和流ᰁ控制机制，保证数据传输的安全性。 UDP 则没有，即使⽹络⾮常拥堵了，也不会影响 UDP 的发送速率。</li> <li>⾸部开销 TCP ⾸部⻓度较⻓，会有⼀定的开销，⾸部在没有使⽤选项字段时是 20 个字节，如果使⽤了选项字段则会变⻓的。 UDP ⾸部只有 8 个字节，并且是固定不变的，开销较⼩。</li> <li>传输⽅式 TCP 是流式传输，没有边界，但保证顺序和可靠。 UDP 是⼀个包⼀个包的发送，是有边界的，但可能会丢包和乱序。</li> <li>分⽚不同 TCP 的数据⼤⼩如果⼤于MSS⼤⼩，则会在传输层进⾏分⽚，⽬标主机收到后，也同样在传输层组装 TCP 数据包，
如果中途丢失了⼀个分⽚，只需要传输丢失的这个分⽚。 UDP 的数据⼤⼩如果⼤于 MTU ⼤⼩，则会在 IP 层进⾏分⽚，
⽬标主机收到后，在 IP 层组装完数据，接着 再传给传输层，但是如果中途丢了⼀个分⽚，在实现可靠传输的 UDP 时则就需要重传所有的数据包，
这样 传输效率⾮常差，所以通常 UDP 的报⽂应该⼩于 MTU。</li></ol> <h2 id="tcp和udp应用场景"><a href="#tcp和udp应用场景" class="header-anchor">#</a> TCP和UDP应⽤场景</h2> <ol><li>由于TCP是⾯向连接，能保证数据的可靠性交付，因此经常⽤于： FTP⽂件传输 HTTP/HTTPS</li> <li>由于UDP⾯向⽆连接，它可以随时发送数据，再加上UDP本身的处理既简单⼜⾼效，因此经常⽤于：包总量较少的通信，如DNS、SNMP等视频、⾳频等多媒体通信⼴播通信 。</li></ol> <h2 id="tcp-协议如何保证可靠传输"><a href="#tcp-协议如何保证可靠传输" class="header-anchor">#</a> TCP 协议如何保证可靠传输？</h2> <ol><li>应用数据被分割成 TCP 认为最适合发送的数据块。</li> <li>TCP给发送的每一个包进行编号，接收方对数据包进行排序，把有序数据传送给应用层。</li> <li>校验和：TCP 将保持它首部和数据的检验和。这是一个端到端的检验和，目的是检测数据在传输过程中的任何变化。如果收到段的检验和有差错，TCP 将丢弃这个报文段和不确认收到此报文段。</li> <li>TCP的接收端会丢弃重复的数据。</li> <li>流量控制：TCP连接的每一方都有固定大小的缓冲空间，TCP的接收端只允许发送端发送接收端缓冲区能接纳的数据。当接收方来不及处理发送方的数据，能提示发送方降低发送的速率，防止包丢失。TCP 使用的流量控制协议是可变大小的滑动窗口协议。 （TCP 利用滑动窗口实现流量控制）</li> <li>拥塞控制：当网络拥塞时，减少数据的发送。</li> <li>ARQ协议：也是为了实现可靠传输的，它的基本原理就是每发完一个分组就停止发送，等待对方确认。在收到确认后再发下一个分组。</li> <li>超时重传：当 TCP发出一个段后，它启动一个定时器，等待目的端确认收到这个报文段。如果不能及时收到一个确认，将重发这个报文段。</li></ol> <h2 id="什么是syn洪泛"><a href="#什么是syn洪泛" class="header-anchor">#</a> 什么是SYN洪泛</h2> <p>SYN 洪泛是指利用 TCP 需要三次握手的特性，攻击者伪造 SYN 报文向服务器发起连接，服务器在收到报文后用 ACK 应答，
但之后攻击者不再对该响应进行应答，造成一个半连接。假设攻击者发送大量这样的报文，那么被攻击主机就会造成大量的半连接，
耗尽其资源，导致正常的 SYN 请求因为队列满而被丢弃，使得正常用户无法访问。</p> <h2 id="半连接队列与全连接队列"><a href="#半连接队列与全连接队列" class="header-anchor">#</a> 半连接队列与全连接队列</h2> <p>半连接队列: 服务器第一次收到客户端的 SYN 之后，就会处于 SYN_RCVD 状态，此时双方还没有完全建立其连接，
服务器会把这种状态下的请求连接放在一个队列里，我们把这种队列称之为半连接队列。
全连接队列：完成三次握手后建立起的连接就会放在全连接队列中。</p> <h2 id="什么是网络风暴"><a href="#什么是网络风暴" class="header-anchor">#</a> 什么是网络风暴</h2> <p>网络风暴是指由于网络上过多的广播数据帧,几乎占满了网络整个带宽而导致网络速度极慢的一种故障。
一个数据帧或包被传输到本地网段 (由广播域定义)上的每个节点就是广播；由于网络拓扑的设计和连接问题，
或其他原因导致广播在网段内大量复制，传播数据帧，导致网络性能下降，甚至网络瘫痪。这就是广播风暴。</p> <p>广播风暴现象是最常见的数据洪泛之一，是一种典型的雪球效应。当广播风暴产生时，它们将在网络中无休止的传播．
甚至可以在网络中无限制的不停的繁殖。过多的广播包消耗了大量的网络带宽．占用了大量的网络资源．
导致正常的数据包无法正常在网络中传送．这时，网络设备处理器高负荷运转。不仅网络设备会受到影响。
而且所有的主机都要接收链路层的广播数据包，因而受到危害每秒数万级的数据包通常都会使网卡工作异常繁忙．
超出了处理器的负荷．设备操作系统反映迟缓，网络通讯严重受阻．严重地危害了网络的正常运行，
大大降低了整个以太网的通信性能．甚至会造成网络的整体瘫痪。</p> <h2 id="网络风暴的原因"><a href="#网络风暴的原因" class="header-anchor">#</a> 网络风暴的原因</h2> <p><strong>网络设备误用</strong>：我们平时使用的交换机具有地址记忆的功能．在通信时，是点对点转发信息的，通常不会产生广播风暴。但有时我们由于种种原因，误将集线器当成交换机来使用。</p> <p><strong>网卡损坏或则交换机端口损坏</strong>：如果网络机器的网卡损坏或则交换机端口损坏。也同样会产生广播风暴。损坏的网卡，不停向交换机发送大量的数据包，产生了大量无用的数据包，产生了广播风暴。在实际工作中，同一局域网中，开始有几台计算机速度较慢，最后却可能导致整个局域网网速都很慢。究其原因是与其相连的交换机端口故障造成的当交换机有一个端El传输速率非常缓慢，最后导致整台交换机都慢下来，通常是因为连接该计算机的网卡损坏．导致不断的发送广播包造成，也有可能是因为交换机端口故障，广播包阻塞不能及时发出。</p> <p><strong>网络环路</strong>：只所以会产生网络环路。一般是由于一条物理网络线路的两端，同时接在了一台网络设备中。对于一些复杂的网络线路设计。应该有一个清晰的网络拓扑结构，切不可凭空想象，以免造成网络环路，影响了整个网络的运行环境。</p> <p><strong>网络病毒</strong>：一种现象是该网卡的发送包和接收包的数量在快速增加，则说明该计算机感染了蠕虫病毒。目前，一些比较流行的网络蠕虫病毒如震荡波、RPC等病毒。一旦有机器中毒后，会立即通过网络进行传播另一种现象是当计算机不断出现IP地址冲突的提示，是由于局域网中有计算机感染了病毒，并采用了TP地址欺骗和MAC地址欺骗的方法不断的向局域网发送广播造成的网络病毒的传播，将会损耗大量的网络带宽，占用网络资源，引起网络堵塞，造成网络广播风暴。</p> <p><strong>黑客软件的使用</strong>：目前，一些上网者，经常利用网络执法官、网络剪刀手等黑客软件，对网络进行攻击，由于这些软件的使用。网络也可能会引起广播风暴。</p> <p><strong>网络视频</strong>：部分网络视频传输设备为了便于网络视频点播，通常采用UDP的方式。以广播数据包的形式对外进行发送。如果在专用网络中也使用这种方式，很容易引发广播风暴，导致网络阻塞，因此必须通过相关设置来杜绝这类故障。</p> <p><strong>恶劣环境</strong>：如不合适的温度、湿度、震动和电磁干扰等因素，尤其是电磁干扰比较严重的环境下，同样也有可能会使网络变得不稳定，造成网络数据传输错误，引发广播风暴。</p> <h2 id="粘包-拆包原理"><a href="#粘包-拆包原理" class="header-anchor">#</a> 粘包，拆包原理</h2> <p>TCP是面向流，没有界限的一串数据。TCP底层并不了解上层业务数据的具体含义，它会根据TCP缓冲区的实际情况进行包的划分，
拆包:一个完整的包可能会被TCP拆分成多个包进行发送，粘包:多个小的包封装成一个大的数据包发送，</p> <p><strong>TCP的粘包和拆包为什么会产生粘包和拆包</strong></p> <ol><li>要发送的数据小于TCP发送缓冲区的大小，TCP将多次写入缓冲区的数据一次发送出去，将会发生粘包；</li> <li>接收数据端的应用层没有及时读取接收缓冲区中的数据，将发生粘包；</li> <li>要发送的数据大于TCP发送缓冲区剩余空间大小，将会发生拆包；</li> <li>待发送数据大于MSS（最大报文长度），TCP在传输前将进行拆包。即TCP报文长度-TCP头部长度&gt;MSS。</li></ol> <p><strong>解决方案</strong></p> <ol><li>在数据尾部增加一个特殊字符进行分割，例如FTP协议；</li> <li>将数据大小设置为固定的，如果数据长度不够，则使用空位补全；</li> <li>将数据分为两部分，消息头和消息体；其中消息头大小固定，且包含一个字段声明内容体的大小。</li></ol> <h2 id="浏览器中的url的全部流程"><a href="#浏览器中的url的全部流程" class="header-anchor">#</a> 浏览器中的URL的全部流程</h2> <ol><li>DNS 解析：将域名解析成对应的 IP 地址。</li> <li>TCP连接：与服务器通过三次握手，建立 TCP 连接。</li> <li>向服务器发送 HTTP 请求。</li> <li>服务器处理请求，返回HTTp响应。</li> <li>浏览器解析并渲染页面。</li> <li>断开连接：TCP 四次挥手，连接结束。</li></ol> <h2 id="网站打不开-怎么排查问题"><a href="#网站打不开-怎么排查问题" class="header-anchor">#</a> 网站打不开，怎么排查问题？</h2> <ol><li>先确定是服务端问题还是客户端问题。</li> <li>先确认浏览器是否可以访问其他网站：
<ul><li>如果不可以那就说明客户端网络自身有问题，那就需要检查客户端的网络配置（WiFi是否正常，网络接口是否正常）。</li> <li>如果可以，那就说明客户端是没有问题。</li></ul></li> <li>抓包确认DNS是否能解析IP地址：
<ul><li>如果不能解析出来IP地址，则说明域名写错了。</li> <li>如果可以解析出来IP地址，那就抓包确认服务是否连接</li></ul></li> <li>抓包确认三次连接服务：
<ul><li>如果能够建立三次握手服务。并且发出了HTTP请求，但是页面还是没有显示，那就查询返回的状态码。</li> <li>404：检查输入的URL是否正确、500：服务器有问题、200：表示请求是成功，那就查询前端渲染是否正常。</li></ul></li> <li>如果客户端网路正常，但是访问速度很慢，导致没有显示出来
<ul><li>那就查询客户端流量是否太大，导致TCP发生了丢包的问题。</li></ul></li></ol> <h2 id="域名解析的工作流程"><a href="#域名解析的工作流程" class="header-anchor">#</a> 域名解析的⼯作流程</h2> <img src="/zhuangxiaoyan/interview/DNS.png" alt="DNS"> <ol><li>客户端⾸先会发出⼀个 DNS 请求，问 www.server.com 的 IP 是啥，并发给本地 DNS 服务器（也就是客户端 的 TCP/IP 设置中填写的 DNS 服务器地址）。</li> <li>本地域名服务器收到客户端的请求后，如果缓存⾥的表格能找到 www.server.com，则它直接返回 IP 地址。 如果没有，本地 DNS 会去问它的根域名服务器：“⽼⼤， 能告诉我 www.server.com 的 IP 地址吗？” 根域名 服务器是最⾼层次的，它不直接⽤于域名解析，但能指明⼀条道路。</li> <li>根 DNS 收到来⾃本地 DNS 的请求后，发现后置是 .com，说：“www.server.com 这个域名归 .com 区域管 理”，我给你 .com 顶级域名服务器地址给你，你去问问它吧。”</li> <li>本地 DNS 收到顶级域名服务器的地址后，发起请求问“⽼⼆， 你能告诉我 www.server.com 的 IP 地址吗？”</li> <li>顶级域名服务器说：“我给你负责 www.server.com 区域的权威 DNS 服务器的地址，你去问它应该能问到”。</li> <li>本地 DNS 于是转向问权威 DNS 服务器：“⽼三，www.server.com对应的IP是啥呀？” server.com 的权威 DNS 服务器，它是域名解析结果的原出处。为啥叫权威呢？就是我的域名我做主。</li> <li>权威 DNS 服务器查询后将对应的 IP 地址 X.X.X.X 告诉本地 DNS。</li> <li>本地 DNS 再将 IP 地址返回客户端，客户端和⽬标建⽴连接。</li></ol> <h2 id="长连接与短连接"><a href="#长连接与短连接" class="header-anchor">#</a> 长连接与短连接</h2> <ul><li>长连接:<strong>多用于操作频繁，点对点的通讯，而且连接数不能太多情况</strong>。每个TCP连接都需要三步握手，这需要时间，如果每个操作都是先连接，再操作的话那么处理速度会降低很多，所以每个操作完后都不断开，再次操作时直接发送数据包就OK了，不用建立TCP连接。例如:数据库的连接用长连接，如果用短连接频繁的通信会造成socket 错误，而且频繁的socket创建造成资源的浪费。</li> <li>短链接:**WEB网站的http服务一般都用短链接,因为长连接对于服务端来说会耗费一定的资源,**而像WEB网站这么频繁的成千上万甚至上亿客户端的连接用短连接会更省一些资源,如果用长连接，而且同时有成千上万的用户，如果每个用户都占用一个连接的话，所以并发量大，但每个用户无需频繁操作情况下需用短连好。</li></ul> <h2 id="长轮询与短轮询"><a href="#长轮询与短轮询" class="header-anchor">#</a> 长轮询与短轮询</h2> <ul><li>短轮询:重复发送Http请求，查询目标事件是否完成，优点:编写简单，缺点:浪费带宽和服务器资源。</li> <li>长轮询:在服务端hold住Http请求（死循环或者sleep等等方式)，等到目标时间发生，返回Http响应。优点:在无消息的情况下不会频繁的请求，缺点:编写复杂。我们日常是的一种的长连接的是使用但是有一个超时机制。超过一定时候就会默认断开。</li></ul> <h2 id="csrf攻击"><a href="#csrf攻击" class="header-anchor">#</a> CSRF攻击</h2> <p>一般来说，攻击者通过伪造用户的浏览器的请求，向访问一个用户自己曾经认证访问过的网站发送出去,使目标网站接收并误以为是用户的真实操作而去执行命令。常用于盗取账号﹑转账、发送虚假消息等。攻击者利用网站对请求的验证漏洞而实现这样的攻击行为，网站能够确认请求来源于用户的浏览器，却不能验证请求是否源于用户的真实意愿下的操作行为。
防范手段:</p> <ol><li>验证HTTP Referer字段:HTTP头中的Referer字段记录了该HTTP请求的来源地址。在通常情况下，访问一个安全受限页面的请求来自于同一个网站，而如果黑客要对其实施CSRF攻击，他一般只能在他自己的网站构造请求。因此，可以通过验证Referer值来防御CSRF攻击。</li> <li>关键操作页面加上验证码，后台收到请求后通过判断验证码可以防御CSRF。但这种方法对用户不太友好。</li> <li>在请求地址中添加token并验证:CSRF攻击之所以能够成功，是因为黑客可以完全伪造用户的请求，该请求中所有的用户验证信息都是存在于cookie中，因此黑客可以在不知道这些验证信息的情况下直接利用用户自己的cookie 来通过安全验证。要抵御CSRF，关键在于在请求中放入黑客所不能伪造的信息，并且该信息不存在于 cookie 之中。可以在TTP请求中以参数的形式加入一个随机产生的 token，并在服务器端建立一个拦截器来验证这个token,如果请求中没有token或者token内容不正确，则认为可能是CSRF攻击而拒绝该请求。
种方式相比于验证HTTP Referer字段安全一些。</li> <li>在HTTP头中自定义属性并验证:这种方法也是使用token并进行验证，和上一种方法不同的是，这里并不是把token以参数的形式置于HTTP请求之中，而是把它放到HTTP头中自定义的属性里。通过XMLHttpRequest这个类，可以一次性给所有该类请求加上csrftoken这个 HTTP头属性，并把 token值放入其中。这样解决了上种方法在请求中加入 token的不便，同时，通过 XMLHttpRequest请求的地址不会被记录到浏览器的地址栏，也不用担心token会透过 Referer泄露到其他网站中去。</li></ol> <h2 id="cc攻击与ddos攻击"><a href="#cc攻击与ddos攻击" class="header-anchor">#</a> CC攻击与DDOS攻击</h2> <ul><li>CC攻击：主要是用来攻击页面的，模拟多个用户不停的对你的页面进行访问，从而使你的系统资源消耗殆尽。</li> <li>DDOS攻击：分布式拒绝服务攻击，指借助服务器技术将多个计算机联合起来作为攻击平台，来对一个或多个目标发动DDOS攻击。</li></ul> <h2 id="服务端挂了-客户端的tcp连接还在吗"><a href="#服务端挂了-客户端的tcp连接还在吗" class="header-anchor">#</a> 服务端挂了，客户端的TCP连接还在吗？</h2> <p>当客户端向一个已经断开的服务端发送消息时，底层TCP协议会尝试发送数据包，但是由于服务端已经不再响应，数据包将无法到达服务端。
TCP协议会尝试多次发送数据包，一般来说，<strong>TCP协议的最大重传次数是6次</strong>。如果在达到重传次数以后仍然没有收到确认消息，TCP协议会认为连接已经失效并关闭连接。
由于正常情况下，TCP连接的关闭需要四次挥手，但是服务器是下线状态导致无法完成FIN数据包的发送。这个时候客户端会尝试多次重传FIN数据包，但最终会因为没有收到服务端的响应而放弃发送FIN数据包，并直接关闭连接。
这个时候客户端直接关闭连接是安全的。</p> <h2 id="http协议和rpc协议的区别"><a href="#http协议和rpc协议的区别" class="header-anchor">#</a> HTTP协议和RPC协议的区别</h2> <p><strong>功能特性</strong></p> <ul><li>http是一个属于应用层的超文本传输协议，是万维网数据通信的基础，主要服务在网页端和服务端的数据传输上。</li> <li>RPC是一个远程过程调用协议，它的定位是实现不同计算机应用之间的数据通信，屏蔽通信底层的复杂性，让开发者就像调用本地服务一样完成远程服务的调用。</li></ul> <p>因此，这两个协议在定位层面就完全不同。</p> <p><strong>从实现原理</strong></p> <ul><li>http协议是一个已经实现并且成熟的应用层协议，它定义了通信的报文格式Request Body和Request Header，以及Response Body和Response Header。也就是说，符合这样一个协议特征的通信协议，才是http协议。</li> <li>RPC只是一种协议的规范，它并没有具体实现，只有按照RPC通信协议规范实现的通信框架，也就是RPC框架，才是协议的具体实现，比如Dubbo、gRPC等。因此，我们可以在实现RPC框架的时候，自定义报文通信的协议规范、自定义序列化方式、自定义网络通信协议的类型等等</li></ul> <p>因此，从这个层面来说，http是成熟的应用协议，而RPC只是定义了不同服务之间的通信规范。</p> <p><strong>应用层面</strong></p> <p>http协议和实现了RPC协议的框架都能够实现跨网络节点的服务之间通信。并且他们底层都是使用TCP协议作为通信基础。
但是，由于RPC只是一种标准协议，只要符合RPC协议的框架都属于RPC框架。因此，RPC的网络通信层也可以使用HTTP协议来实现，比如gRPC、OpenFeign底层都采用了http协议。</p> <h2 id="tcp要设计三次握手-我认为有三个方面的原因"><a href="#tcp要设计三次握手-我认为有三个方面的原因" class="header-anchor">#</a> TCP要设计三次握手，我认为有三个方面的原因：</h2> <ol><li>TCP是可靠性通信协议，所以TCP协议的通信双方都必须要维护一个序列号，去标记已经发送出去的数据包，哪些是已经被对方签收的。而三次握手就是通信双方相互告知序列号的起始值，为了确保这个序列号被收到，所以双方都需要有一个确认的操作。</li> <li>TCP协议需要在一个不可靠的网络环境下实现可靠的数据传输，意味着通信双方必须要通过某种手段来实现一个可靠的数据传输通道，而三次通信是建立这样一个通道的最小值。当然还可以四次、五次，只是没必要浪费这个资源。</li> <li>防止历史的重复连接初始化造成的混乱问题，比如说在网络比较差的情况下，客户端连续多次发送建立连接的请求，假设只有两次握手，那么服务端只能选择接受或者拒绝这个连接请求，但是服务端不知道这次请求是不是之前因为网络堵塞而过期的请求，也就是说服务端不知道当前客户端的连接是有效还是无效。</li></ol> <h2 id="网络四元组"><a href="#网络四元组" class="header-anchor">#</a> 网络四元组</h2> <p>四元组，简单理解就是在TCP协议中，去确定一个客户端连接的组成要素，它包括源IP地址、目标IP地址、源端口号、目标端口号。</p> <p>正常情况下，我们对于网络通信的认识可能是这样</p> <p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAjIAAACUCAIAAAAGdFTUAAAVmUlEQVR4Xu2d+3McV1aA919KE8ICaxNwYEMcCOzyTGJX7S+uSmxVsbAEMIaFAHIC2BiRrbjYiGBeSgysHfIA4o2ySamKXxQSV9kGNiAHAnZQYgzYxiyv5uge99GZ291XrbHm0brfV6qpnjvn3r59Z3S/Obd7Zj5WAgAATA0fiwsAAAAmB1oCAIApAi0BAMAUgZYAAGCKQEsAADBFoCUAAJgi0BIAAEwRaAkAAKYItAQAAFMEWgIAgCkCLQEAwBSBlgAAYIpASwAAMEWgJQAAmCLQEgAATBFoCQAApgi0BAAAUwRaAgCAKQItAQDAFIGWAOB22b9//2cAWpCXR/yKSYKWAOB2kannBkAL8vKIXzFJ0BIA3C5oCRKgJQAYN2gJEqAlABg3aAkSoCUAGDdoCRKgJQAYN2gJEqAlABg3aAkSoCUAGDdoCRKgJQAYN2gJEqAlABg3PdLS0tJSUfHaa6899thjdlc5efKkBV+4cOHRRx+9dOmSa2AAeUhaiAJkF74RQEsAMG76pSV1xpEjR0RLjz/+uLjHHj0Z0G2RzcMPPxxJS2lUl7Qsbd5wu/Ct5Qxa6iWLX/3Kx49+ov53zxc+ee7yeY1ZvbZ66OXPX//addl44IufbgsDGD+b0pLPVwSZ+hPpyJaT1pIUSsCNykmPPPKIJENXrlyxAKlrHZaK9913nx3FSy+95I9LQUs30FJPES2JcqJCMdBnv/S5upYGo9aRh/Y994g0VQ56rou0pGWpa41rU1p9/i+erRfWe6tE7ZSh2yZR7ZuGaUkUXA67F2vQdiGHLAfefQTgduiuJZn0ZSpvNMF4iBbxVEtWqBIS60gCpJ2U24ceeuhCQHqOZoYALfWStJb8TO09ERFpySZu2RYxiB7iCgFpTQXgJ3q5q/2RWg+e2KtzukRq47qjqBuN7fjqPlJjGtvxu5Zum2aUxr1Yx/yR+hGAUdNdSzKtR/mHxztDXSWREn/ixAk9CXSkwlex9KVL9XS2VCfK7byW7MSSFB4/frxtxW+c0p1O0FIv6bKIJxtiqcQ826Yl01tcweHjI5fIpF8XoZTUPVrWZNBW1wrr7chdn1TVq5e1vRi+542mhxHRXUs6yzfmHD6Rsm31ik+wLH3Ru2IXba1j9UhL9UseVF3+rlZUpK6WS5vvvPOOWk0KvXuiu4CWeknjHBrp5MVzLz94Ys8DX/yUFNYFJtP06vXVRi3ZZO2TiYjGeH2obo7GLEep63Dujaesh9b+Wm+vrTb60uxrYf5RpU1LvlzzKv0zz8GI6K6lG+35hwnmRpXlSKRueI35Eq+ojtXr2ZLkUuaekwELThQq6jBLwvxxKYnUMB/QUi/ZUEt6Yknm3Of+8qT5QGp5N6gt6lqarxbNOmpJ29H++G0jWkPzRHqT3fl2tLdarsKo98efE+qyl9KdjmqMlwbF5elkEW6TTWnJYyds1B/RnG7lkRXEATrdS7kapXt1L0XVkrZ2KaAbUVgdS4akZbGaz5nUYeoqKZSH0BJa6iWLGy3iiY1UXTrt6kqXaslWuiItWSONk3VENNGbOaQDku6YlrxpGom05LMue+hQdfaodMrUu95epTvPFBH11mgzkA0RjIihtXQjJBxC3R9KY7leJqdLcGqIxrDGctXGjcFzS1ro8y3Du0pR6+i2Kk0DtFybQksetNRLVDlR4XWXLYmWLl55T7Vky1yqJbkrs7+uiXktNU7cbSTiVYFl+6Tv8e34/ttD7115z7vKOt94t61XbeVli4EaC2EL6a4lXe+yu5otacnS4EV6OrnXvWKPFoNLZB2rqzZuDGpJw3xrRt1V/hC0/1oRLbWBlnrJhloq3QXi5gnVUllNuxtqabHbIl5beePkHiU0UTuWDGnfrLdWxQK00IdZZFRY1uQnMXpQXpwrH120YC4QHzXdtaTzuK2GRReLL7mlM72+ru4VxVb/fOGG1eWuXXrntSTbjwa8mRp34VtQNEx2d/z4cbTUCFrqJYsbLeKVlZZePPeyzcimJc2f2i55MLprab66XsDP/vvcRer2UFpLZVCLxluYb8qCrR1/5klL0loqB09H6eGX7hBw0hjorqXJop546623VCQrKyuPhTNS5h4V2+uvvx4lT96mR6rrI6zQZ0v6kDVlwTmDlnrJ4maypdLNuTYLA0yQvmgJJsJItLRz505LjSGNjFU8fADbHbQECUaiJZlt4yJogbGCDEFLkAAtTRjGCjIELUECtDRhGCvIELQECdDShBlurLpfiXc9+cMWh9wXyinz1deYGnZpXP2vfv03QBfQEiRASxNmuLHa7JV4bVgV+Tt85smy0pJeya2XhtfVpdjl5h1pvCzblBl9yWzHSOgpaAkSoKUJM9xYpbUUfWaoTR4+DZp74ykzgf7ZJ5a2REsqFW1nsfo4lP+AkRV2j/TtQ79AS5AALU2Y4cZqscMinn5mNp0tdWGrtLSv+nrv1eq77865rw5S8Uib3SMH9wB9Ai1BArQ0YYYbq3S2pHc3/GGL40u/Ke1IvGzLpN8Yo6t5jQ6ItHSo5WtSjfnqZ5Os89FRHKq+rKh7JPQUtAQJ0NKEGW6sNtTSaocfttC7UVOHzzwZnbnZQi2Z8Ew/jbLpHgk9BS1BArQ0YYYbq8WNFvG6/LDFuXCZw3xITbwJ7E9t1FFLac65L0W1s0eNOVD3SLsLvQMtQQK0NGGGG6tomlZ8ttTlhy00o5p74yktb7wtt0hLjenO4uAXe+sZo+6RFgO9Ay1BArQ0YYYbqw21VHb7YQvZ0Cp1IW1WS4eSi3iNOZAXjImne+TgHqBPoCVIgJYmzHBjtbjRIl5ZaSnxwxbXq581klpyN6Gl+o70r7uWysE+m+fOVR9R8td8d4+EnoKWIAFamjDDjdXiZrKlsuWHLdQ3OsubhOyhxDdBKCY5gM2CliABWpowjBVkCFqCBGhpwjBWkCFoCRKgpQnDWEGGDKelHTt2FNAr5CmLn8UOoKUJw1hBhgynJf5Zeoc8ZfGz2AG0NGEYK8gQtJQJaKmXMFaQIWgpE9BSL2GsIEPQUiagpV7CWEGGjFlLc4G4FEYPWuoljBVkSB+1dPr06agRKSkCe/fuvXr1qhYuLy9roXDw4MGbN2/6Kp6VlZWZmRmrqFh136btaPfu3VLLxxtdYsqmnVpFQbatXA7WyqOHulOgpT7CWEGGjFlLt4mpwmtJCs0cUm4GkulbHpINuSuFjTqUWlK3GHRPOdhmY2FjQMeYxp1KJ6WHelcDtPPlFrkcLfUSxgoyZMxashlWcoU9e/YsLCzUNePV0ojPllQ5lkBos/UcRQISbUaJi2zI3XQjXXbUFqPUsyUjOii0lC+MFWTIBLW0e/du3a4nBwmFlEktRU0Z6Zk9MoT2TX3plamNa9/qC4ndY5SElrQDfkCsM8Ot4JVoqacwVpAhE9SSzyTS2oiIpnufoDRqqW0xzYgMIfFRgz5xOXDgQJE8b9QlpqztVNHdtekn0tWmQEu9hLGCDJkSLaUTi4goWBOmW9lETQYyiaf1UNYM4bVUOu35/bY12yVGadSSEqWAHmm8sXxD0FIvYawgQ6ZES1behYTDpMHZ2VkzSloMRmSI6K7tziuhMS0ru8UoCS2V7ceIljbBnFv91KfhqjttuKnX3KQY21iB56MXZo6+PVBwambm1Ae+5Ba1yPLssSIqgc0yDVqqK6r7uSVPpIG2tbt6+5EhNFnRXfg2Zb/WoBeeL+8So0Q7lQ3ZY33lULYXFhasSuIaijR5aUlH0F4lN6vLHK9uhZZOJ6+f2VrGMFbQxNmjM6c+snsfrFlp/a6jrqXy7aNFSzB0ZIJa8pcV+JSirg1j2X0UyWrpFFTUlu/mBj/uY4/69q2uYtOUL/fZibXp9xUpZ8OYtp36DttOoyXKttxrQ4p8tOTfVkR4LQ0NWuoL4oyhDaG+kdSnhaNnXVhIp+KIwNHBVuEWTzzxxCuvvHLt2rX4gcCYtWTczht/GIIiHy0lXltt2VL9bYi6bWlpSd8U+Dc1NuUMt5y6KUY9Vtub29HSWoZ07JZ6mlfwPvAmWrPUwPLd2qO31AV15D/0jjvuuOuuu/bv3y//R/amXkFLmVDko6XokhVPo5bUSbZmqou2qqXGFJtsqRf4RGfmBXXTek6j/ljz1rGza7e34poc9vbRIvhJwqp21hlcxJP2VUVnj+KkJKql6vkp7rzzzn379j3//POrq6vl5LQEY6ZAS2WLliLNzIWrSlRLlg+tuDOBY9bS1znuDHx94K7ANzg+HvjGwDcFvrniE4EdgZ2Bbwncfffdeit8a+DbArsC99xzj94K3x74jsAnA/fee6/eCt8ZuC+wO3D//ffrrfBdge8OPBD4norvDXwq8OnA9zm+P/ADgR8M/JDjhwMPBh4KPFyhozeYLYkqChXM2p0X1spVSAPSkoBbaZBmSOupUkpLb6+13YjE/EjgsxU/GvixwOcCP+54LPATgZ8M/JTjYOCnA4cCP+P42cDnAz8X+HnH44FfCPxi4Jccs4HDgScCTzp+OfArgV8NHHEcDfxa4NixY78ekP8jvRV+I/BU4AsBeeV4LXmkBXlrGE9FHShGPLHAllPkoyWvkIg2LUX/GHPh4hP5/7dTeRPUktz+X+B/A//j+O/AfwW+FvhPx83AfwT06bzuuHbt2r8H/i3wrwE5QL0V/iVwJfBR4MMPP9RbYTXwz4EPApcvX9Zb4VLgnwL/GHj//ff1VviHwN8H3gtcvHhRb4WVwN8F/jbw7rvv6u1XA38T+OvAXzkuBM4HdPQGtNR0JUK8yrdmF81yKhsNrNQ5qlqDYqs1GHjzzTffCHwl8HpgcXFRb4XXAl8OnAm8+uqreiv8eeDPAn8aeKXi5cBLgRcDf+J4IXA6cCrwJccfB/4o8IeBk47nA88FFgJ/4Pj9wO8FfjfwO44Tgd8OPPvss78VmJ+f11vhmWeekbcyqiW91Wzp6aeflgMpyZayochHS1Gi42nTUl0zU6UlGA4vCV2vawjwhesnhBrOJ8XZUpUhSba0vgwYM7MeD47pPLcEY6bIR0tldcmmmelm8gLxlcEvz5B3c1KClrYBsZZqeUyspfWMSrXUdn1dUS3xVYt461VutRQ7DAY5fPjwFF6JNwQ2jXRBpxp9Afn3zbZg4yeWq+46LL8Lux49+shRHymy0lI5+KTalQuNWioHXy6qooSWrOXGhGxrGc9YbVcGVbR2bslU4c8tVV7xAR2yparwVnU7vaTXUNQUCN3ZllrSecN/qkm3lwd/AkNb80s+fnvFXSs4zvfHI6LITUvbA8bq9giXOazL5tbdYvBKPLtmb11ax4qZY0ejK7w30JKyfi4qthp0Z8xa0vl9dnZWnzl7M+rf2lqhaEMiD4bPjRw7tn65pxpCqzS+YfVG8aaZc9/cY4ry3tIY1dVp910SvsGeUqClPsJYjZR4EU+xTyy1Xe+wxsypc+sX7K1fjL6eJOkCIB+nHYbxa6moxGNiiHIUW+cXK/gvSoiypYSWSlfXVl+iE+FRMqS9alvjidTVRwq01EcYq5HSrCWYNOPXkq2G2Vwf5SLmg8hD0d000qy0qecL/AKdP1kQfSmfUAx+FZA5DC11BC1tMYzVSEFL08kEtWSesITGYm5TS75BS6rasiWfIWlMfe9oqSNoaYthrCBDJqil0WVLy4Mf8/cN1s8t1aWodTm3dAMtTRzGCjJkglqybZ+jrAyeW/Ie8nXL5Lkl34gPMxWVrnEfEPWEK/HQ0oRhrCBDxq+losIMUbZfiee1ZDFqiISWysGfwPAx1gGvGdWYlvs9WiO+qz2lQEt9hLGCDBm/lvqedvQUtNRLGCvIELSUCWiplzBWkCFj1hJMCrTUSxgryBC0lAloqZcwVpAhaCkT0FIvYawgQ9BSJqClXsJYQYYMp6UdO3YU0CvkKYufxQ6gpQnDWEGGDKclyAS0NGEYK8gQtAQJ0NKEYawgQ9ASJEBLE4axggxBS5AALU0YxgoyZDgt7dq1qzqVDv1AnrL4WewAWpowjBVkyHBa4p+ldxRcIN5HGCvIELSUCWiplzBWkCFoKRPQUi9hrCBD0FImoKVewlhBhqClTEBLvYSxggxBS5mAlnoJYwUZgpYyAS31EsYKMgQtZQJa6iWMFWQIWvJs4990R0u9hLGCDBmRlq5evbp3796iYmxz/crKyu7du22/c3NzcUSS7lrqHjkidISXl5fjB1oo0FIfYawgQ0ahJZmsZcqWidtK5ufnRRguZCREM7V0Q7QkhYNRKbrLpnvkiOixlnbu3GlvHCCNjFU8fADbnVFoSQy0Z8+eNg/JhK7/cTatizxmZ2flrhQuLCz42dY3JYVaUQJUNuoGqVuExEgC7KEIn735qdw6oxW9bGRbEq/GXfucrHGP0hl91FooK1truaVxUQfK2r40xg6zqPpvuxD8O4A2iunREgBAglFoSR3QmEzIBGqzrUysOp/Khp++pdDP2rotc7HFWKHO6d5hElNfuPPZm8ZoFd+Z8+fPy0OmJQmw/rftuvEAy3D4IlfdlmAN0z5Y386cOSMl9Q607csO09Srg9zLbAkAIMEotFTWzi2pErweyjDD6pQ9F7C6MinPzMxICxpvyYHFWEDdDT6Psancp1zWVNQZRRtcWlryOVDHXTdiFon6UNZGQ9lwX2YjtAQA25MRacmzHFal5FYnYnNGUa3j+bm4rOZribd5uRxcsyqa1tzqnK5W4Xw7Wm5aiqZ1zUuKwWWxIXath+zjoz6U7jBdvY33ZbXQEgBsT8agJUsLGificjBFUNQcpwMWEyUWZXIlrXSJxaayJaly+fJl38/N7nrZLcQNkS2l90W2BADbnFFoSSbf2dlZm7L9jKzzviYNErCwsHCzli2VYfKV3OLAgQM2j/u5XpCK9ZRFYnw7pgQVgD600nJu6cyZMyvu3JKf9Bt3bY1roW/WP2S78H2wA693oHFf/jBtu9FqCdASAPSDUWhJZ0xbifLzbOkWyopqrayuJS2M0pFltzKm8ZGW1CUW47XhH/IZxly1aKbBvsHINNasqUWP0ZIhC/aHL2a1bvg+2PFGHWjclx8xf1AW2UVOBVoCgF4wCi3B1hLZdzjQEgD0A7Q0/aAlAMgItJQJaAkA+gFaygS0BAD9AC1lAloCgH6AljIBLQFAP0BLmYCWAKAfoKVMQEsA0A/QUiagJQDoB2gpE9ASAPSD4bS0a9euAnqFPGXxs9gBtAQA42Y4LUEmoCUAGDdoCRKgJQAYN2gJEqAlABg3aAkSoCUAGDf79+//DEAL8vKIXzFJ0BIAAEwRaAkAAKYItAQAAFMEWgIAgCkCLQEAwBSBlgAAYIpASwAAMEWgJQAAmCLQEgAATBFoCQAApgi0BAAAUwRaAgCAKeL/ATME7usJpee/AAAAAElFTkSuQmCC" alt="img.png"></p> <p>服务端通过ServerSocket建立一个对指定端口号的监听，比如8080。 客户端通过目标ip和端口就可以和服务端建立一个连接，然后进行数据传输。
但是我们知道的是，一个Server端可以接收多个客户端的连接，比如像这种情况:</p> <p><img src="data:image/png;base64,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" alt="img.png"></p> <p>那，当多个客户端连接到服务端的时候，服务端需要去识别每一个连接。并且TCP是全双工协议，也就是说数据允许在连接的两个方向上同时传输，因此这里的客户端，如果是反向通信，它又变成了服务端。</p> <p><img src="data:image/png;base64,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" alt="img.png"></p> <p>所以基于这两个原因，就引入了四元组的设计，也就是说，当一个客户端和服务端建立一个TCP连接的时候，<strong>通过源IP地址、目标IP地址、源端口号、目标端口号来确定一个唯一的TCP连接</strong>。因为服务器的IP和端口是不变的，只要客户端的IP和端口彼此不同就OK了。</p> <p><img src="/zhuangxiaoyan/assets/img/TCP-port04.2d4db7c5.png" alt="img.png"></p> <p>同一个客户端主机上有三个连接连到Server端，那么这个时候源IP相同，源端口号不同。此时建立的四元组就是（10.23.15.3，59461 ， 192.168.8.135，8080）其中，源端口号是每次建立连接的时候系统自动分配的。</p> <h2 id="select-poll-epoll原理"><a href="#select-poll-epoll原理" class="header-anchor">#</a> select poll epoll原理</h2> <p><img src="/zhuangxiaoyan/assets/img/network-select.d0cd64f3.png" alt="img.png"></p> <p><img src="/zhuangxiaoyan/assets/img/network-select02.afe8e35d.png" alt="img.png"></p> <p>时间复杂度:O(n), fd_set(监听的端口个数)：32位机默认是1024个，64位机默认是2048。</p> <p>缺点：</p> <ol><li>单进程可以打开fd有限制；</li> <li>对socket进行扫描时是线性扫描，即采用轮询的方法，效率较低，需要应用程序中数据的拷贝到内核中，这样来进行查找判断时候有对应的套接字；</li> <li>用户空间和内核空间的复制非常消耗资源；</li></ol> <p><strong>poll原理同步多路IO复用类似</strong></p> <ol><li>调用过程和select类似。</li> <li>时间复杂度:O(n)</li> <li>其和select不同的地方：<strong>采用链表的方式替换原有fd_set数据结构,而使其没有连接数的限制</strong>。</li></ol> <p><strong>epoll原理</strong>: 应用程序与内核共享一块数据内存，这样不用将数据复制到内核中进行查找。利用的事件驱动的方式进行，代理轮训的方式进行遍历，效率更加高。
epoll利用数据结构：红黑树和链表两种数据结构构建。</p> <p><img src="/zhuangxiaoyan/assets/img/network-epoll.8d7b9592.png" alt="img.png"></p> <p>时间复杂度:O(1)</p> <p>epoll的工作方式：epoll的两种工作方式：1.水平触发（LT）2.边缘触发（ET）。</p> <ol><li>LT模式：若就绪的事件一次没有处理完要做的事件，就会一直去处理。即就会将没有处理完的事件继续放回到就绪队列之中（即那个内核中的链表），一直进行处理。</li> <li>ET模式：就绪的事件只能处理一次，若没有处理完会在下次的其它事件就绪时再进行处理。而若以后再也没有就绪的事件，那么剩余的那部分数据也会随之而丢失。</li></ol> <h2 id="tcp粘包和拆包与解决方案"><a href="#tcp粘包和拆包与解决方案" class="header-anchor">#</a> TCP粘包和拆包与解决方案</h2> <p><strong>粘包问题</strong>：如果一次请求发送的数据量比较小，没达到缓冲区大小，TCP则会将多个请求合并为同一个请求进行发送，这就形成了粘包问题。
<strong>拆包问题</strong>：如果一次请求发送的数据量比较大，超过了缓冲区大小，TCP就会将其拆分为多次发送，这就是拆包。</p> <p><img src="/zhuangxiaoyan/assets/img/TCP-package01.70e8a509.png" alt="img.png"></p> <p><strong>粘包和拆包的常见解决方案有以下4种：</strong></p> <ol><li><strong>发送端将每个包都封装成固定的长度，比如100字节大小。如果不足100字节可通过补0或空等进行填充到指定长度；</strong></li> <li><strong>发送端在每个包的末尾使用固定的分隔符，例如\r\n。</strong> 如果发生拆包需等待多个包发送过来之后再找到其中的\r\n进行合并；例如，FTP协议；</li> <li><strong>将消息分为头部和消息体，头部中保存整个消息的长度，只有读取到足够长度的消息之后才算是读到了一个完整的消息；</strong></li> <li><strong>通过自定义协议进行粘包和拆包的处理。</strong></li></ol> <p><strong>为什么UDP没有粘包？</strong></p> <p>粘包拆包问题在数据链路层、网络层以及传输层都有可能发生。日常的网络应用开发大都在传输层进行，<strong>由于UDP有消息保护边界，不会发生粘包拆包问题，因此粘包拆包问题只发生在TCP协议中。</strong></p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/zhuangxiaoyan/interview/jvm.html" class="prev">
        JVM面试问题
      </a></span> <span class="next"><a href="/zhuangxiaoyan/interview/os.html">
        OS面试问题
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/zhuangxiaoyan/assets/js/app.868ae4fe.js" defer></script><script src="/zhuangxiaoyan/assets/js/2.e0e92cc0.js" defer></script><script src="/zhuangxiaoyan/assets/js/11.8bbceb5f.js" defer></script>
  </body>
</html>
